<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="ce48def4-ecd3-4578-a091-dcec129642ab" activeEnvironment="Default" name="WsEnterative" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" defaultScriptLanguage="Groovy" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="PreparaAmbiente"/>
  <con:entry key="Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:RestService" id="859daff5-1a4a-44a5-ba8e-85b48e374c45" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://localhost:8000" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://201.65.240.131:8123</con:endpoint></con:endpoints><con:resource name="Ativacao" path="/ws/ativacao" id="d0b97f08-637f-4e16-a260-cb7bd1669da6"><con:settings/><con:parameters/><con:method name="Ativacao 1" id="e5866285-902a-4f1f-a5b1-53699d7cfc19" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/html;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="http://localhost/login">log:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500 401 403 400</con:status><con:params/><con:element xmlns:log="http://localhost/login">log:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{  
   "distribuidor":"142749",
   "cardNo":"5051644033099999",
   "codexterno":"1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource></con:interface><con:testSuite id="8323948f-7259-43f1-8730-1250ab4de16c" name="PreparaAmbiente"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="859ab774-3e1b-4a06-be68-49ec5c91d263" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Cria Banco de Testes" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Testa Conexao" id="40ff5d13-73ec-47e7-bca8-ca19aeedceb1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://201.65.240.131:3306/mysql?user=root&amp;password=root</con:connectionString><con:query>SELECT count(*) FROM db</con:query><con:assertion type="JDBC Status" id="8ae59bb3-1e6c-49d8-9d92-4730c2b01cfa" name="JDBC Status"/><con:assertion type="JDBC Timeout" id="88d8d9b7-0641-4bce-b2f8-402fde11a825" name="JDBC Timeout"/><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Recriar Banco" id="ae0e92d2-357f-4891-b9f1-69b11396a624"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/information_schema?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("SELECT count(*)bancoexiste FROM SCHEMATA where SCHEMA_NAME = 'enterative'");

def bancoexiste = res[0];
log.info(bancoexiste);

if (bancoexiste != null){
	def query = "DROP DATABASE enterative";
	con.execute(query);
}
def query = "CREATE DATABASE enterative";
con.execute(query);

con.close();</script></con:config></con:testStep><con:testStep type="manualTestStep" name="Ativar Manualmente o Servidor" id="bc8f86be-425f-4ed2-9ab4-f1973635c922"><con:description>Inciar o Servidor e aguardar mensagem do echo</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="groovy" name="PopularTabelas" id="d9ca622e-cf1f-4eac-b41a-bf863e00b237"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");
def query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401908' , 'GCMV IMVU 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401916' , 'GCMV HELP PROVAS 19 90BRL', 19.90)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401188' , 'GCMV FACEBOOK 25BRL', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401189' , 'GCMV FACEBOOK 45BRL', 45.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403309' , 'GCMV GOOGLE PLAY BRASIL 15BRL', 15.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403310' , 'GCMV GOOGLE PLAY BRASIL 30BRL', 30.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403311' , 'GCMV GOOGLE PLAY BRASIL 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403312' , 'GCMV GOOGLE PLAY BRASIL 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164404845' , 'GCMV HABBO ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405063' , 'GCMV RIOT BRASIL ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405061' , 'GCMV RIOT BRASIL ASSISTED 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";	
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400391' , 'ROTEIRO HOMOLOGACAO 7', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400392' , 'ROTEIRO HOMOLOGACAO 5', 25.00)";
con.execute(query);
 
query = "INSERT INTO distribuidor (iddistribuidor, nome, cnpj, cpf, endereco, bairro, cidade, estado, cep, telefone, contato, email, situacao, data_incl, data_alte, observacao, acquiring_institution_identifier, merchant_identifier, merchant_location, merchant_category_code, point_of_service_entry_mode) VALUES (142749, 'Chart', '42767525000105', '', 'Rua dos Guajajaras,977', 'Lourdes', 'Belo Hol', 11, '31360060', '', '', 'andremelo@chart.com.br', 0, '2017-02-02 17:31:40', '2017-02-02 17:31:40', '', '60300004684', '60300004684    ', '                      Campo Grande MS BR', '5399', '041')";
con.execute(query);

query = "INSERT INTO usuarioweb (idusuarioweb, login, password, nome, situacao, distribuidor_iddistribuidor) VALUES (3, 'chart', "+'"$2a$10$xkdQa3ulII0gM22Mz4mXOOqdyInLRajplnugCN5jmcdNsEjF4PARK"'+", 'chart', 0, 142749)";
con.execute(query);
query = "INSERT INTO usuarioweb_roles (usuario_web_idusuarioweb, roles_nome) VALUES(3, 'ROLE_USUARIO')";
con.execute(query);
query = "INSERT INTO servidor (situacao,descricao) VALUES(1,'HOMOLOGACAO')";
con.execute(query);

query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),0,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),4,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/reverse')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),6,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/network')";
con.execute(query);

query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TEMPO_ENVIO_CANCELAMENTO',900000)";// 15 minutos
query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TEMPO_ENVIO_CANCELAMENTO',60000)";// 1 minuto
con.execute(query);

query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TTL_DESFAZIMENTO',192)";// 1 a cada 15 minitos por 48 horas
query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TTL_DESFAZIMENTO',2880)";// 1 a cada minuto por 48 horas
con.execute(query);

con.close();</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite id="f8332ac2-ab0b-479b-b189-8a9a9e44aed6" name="Homologacao POR 3.0"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4494bd4f-195a-4ec8-a6f5-84e11e28461a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="301" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="00b9330a-1b88-4ff4-b869-68d6e30ff13a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a729fe10-5b10-497e-97a4-3a7d8fbdaf54"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ca3f5810-1fa9-434b-9abd-4413bf28e62d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="525429e0-8b6d-47b9-a538-d0643f8c11f7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="44cdaaeb-54ef-4f30-b460-2ee970a23daa"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "301",
   "pdv": "123",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ed5c3e09-2601-4f3c-822c-4caae5de259f"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="583d0353-94d1-44fc-99db-0c58a84eaa46"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ab41ba4d-76a0-4ccb-934a-7e83425b905f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="0bd76f10-533f-4811-96a5-ef5b0367dc84"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "301",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="36c51990-3b89-4175-b913-a37c90cfb18e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="302" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="67a55634-5dcd-4e18-963b-200621c40620"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3f107387-30e5-473e-91a7-e908d1f3063e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="434681e7-56ad-4f87-905a-d53e0c3112f8"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="eb484e23-81e2-41cc-b5be-28828c128ec3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="9d4bb143-7aa4-42ba-9cd4-567d8ef132fa"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "302",
   "pdv": "123",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="dcf1ad71-c270-4dbb-aaa3-724f4745e9c5"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d9c66f41-4515-4607-a4ca-c23b574e920f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="cffefbe1-b3b7-4ba6-975e-9d7e2672e463"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="59a7db0c-df61-44c9-9bb8-8b6c77bc3c03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "302",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="cc81838d-c44b-4395-9160-8d9189d95d1b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="303" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6c07ccad-c06c-43ca-9e63-07883b915e35"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="fb389e7d-d95e-4828-a0cc-3c3f40fe8b55"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ee603b25-503b-4dc8-803c-6c49162c644b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>21</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="0f3a0a95-d3d7-4476-b724-90fbd6363001"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="46a925cd-bc1e-449f-a153-7316dc4af047"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000021",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "303",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c887e731-69d6-451e-8309-63cf79a7530e"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="bd3ae212-2480-4ebe-b9ed-9a82b706b6bc"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="1971de39-df80-4541-b896-c48f3db5718d"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="37b4b886-a227-43ef-98c2-a24347438013"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000021",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "303"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>resposta</con:name><con:value>21</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="ef143992-6b85-49ff-83e5-1946a7deca70" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="304" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="098284f7-d0ef-4bb0-b858-407f5d2aa17d"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="4fd01010-8a04-4c2d-8d54-12c87feac9bb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="add9cd21-c0ff-41af-a081-06c44b2d6d31"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="5c1a3589-b5e5-482a-aefe-8eb9f39a5021"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="65c280a4-71c2-454a-9f3d-16a7e5a1c3f9"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "304",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="aa99c652-e49a-4444-a45b-1773865f6e57"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="97e6fc90-8896-4352-aaae-64ae7d6d8cb6"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="aac0a12d-f396-4173-84fb-58d5853ca66e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a2fa5fce-adae-4d4b-ab01-d9072acc7fac"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "304"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="462b23f1-957f-4241-bb9d-8ccec81e3d89" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="305" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="2fc700d8-0028-4ad8-a2ff-ff9daf288044"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a4b172d9-0500-472d-93f9-1d1ea34ac1d5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="17a2d2c6-fcfc-4dac-aa60-1c25737dcd9c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>16</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="882fa710-ebf0-4a8a-a9f9-144bd6ed7906"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="a2f1a351-248b-4a8f-aeb3-545aec324b47"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000016",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "305",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="60277095-2f0e-4334-9f26-6270e8fb0a70"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="73752376-462a-4ce7-ad43-9ea0129ee6b8"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="f179e137-7e28-4bf5-aa92-79e8ae58be8e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="b189f77a-15b2-48ab-8fac-f8e26aeb7fd4"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000016",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "305"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>resposta</con:name><con:value>16</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="54515dbc-49b4-40a8-80ea-3a8df13388c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="306" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="0a73eff8-ca00-451b-8c3e-c5cea4a0cfcf"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="ba8ca944-420a-4228-83f5-dc121792dc81"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="7302b724-aa2b-4494-8362-2cfd3a90671e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>33</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="72e9dcdf-099a-4341-a296-22b4a2936dc8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5635ef96-d204-4444-b07b-6fb34841df73"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000033",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "306",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b92bc40f-556a-48cd-85eb-38fc4ce48809"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="eda6229b-bb33-4283-89a7-3da29c1094c5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="1d18ee2f-3f41-49ec-a1d0-1794d1b266e9"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="721c24ce-6314-490a-be88-587b2aa69c53"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000033",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "306"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>resposta</con:name><con:value>33</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="0155980c-f970-4c55-9ad9-5b35d8f20da1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="307" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="3149e170-54e0-4e23-92ce-c2d0376aa0b8"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3d1aa1e0-f7d9-4a7e-86c6-1f703f854c58"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="a243b47c-990c-4e0e-83b1-cd8d6346e066"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="34c04321-22c7-44db-95e3-2cb3f0a78f24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e065b120-bd29-41bb-9873-d7838c362f74"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "307",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a137c99f-1199-44e7-9fcf-b97172600d88"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="de7fd440-03f0-48a7-9d74-8f4997978cd1"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e34aa23d-2acf-43e0-bb19-92c26feff8a7"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="77e7d487-3ec8-4c1d-9425-fe1e61a3c284"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "307"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="1cd33ac7-7e03-431a-a612-33dffbcd031d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="308" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="db339037-6aff-4c08-9bc9-781d4d66eac8"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="15e7b24f-4315-4f77-a22e-e8c89ece1c1f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="c892556d-c507-4e55-8bf4-c41ba002b84f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>17</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="75d55cf2-f5e6-49e1-864d-a51cf40bcf69"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e255b2dd-84ef-4d48-95f2-bde913fc4061"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000017",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "308",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="d41ba3cf-4401-4d59-a0c7-f040a07e9932"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="7ba149b1-1ccb-4266-bfc4-2e065a8bc307"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="c11a8345-6435-4605-ba6a-4599ad952377"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="6a2a9d3e-aa5c-40bd-b6c0-29e4b677f57b"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000017",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "308"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>resposta</con:name><con:value>17</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="52885e1f-cefe-4e64-b28f-d32da341e9e8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="309" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c3a5afca-bfcf-49ca-abea-03f37961f024"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="be20b22e-826b-4a93-88c9-37c4d492d6bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2eea0869-4b03-4855-9502-ec3c4f4e3461"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>41</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="5e06ea4e-7e99-4929-9835-df38aadc065d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="0d09031c-e26e-4c8d-9517-004ec09401d0"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000041",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "309",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="0d143299-09af-4a3e-bfa2-5b08c8985ceb"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="12bda722-c638-4fb4-a7f3-33b0a633dd61"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="7ad840b8-598c-4965-96d6-6d047f5244eb"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e80e3c5a-2214-42b8-b1d1-a32c8e212abe"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000041",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "309"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>resposta</con:name><con:value>41</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="f61f8392-a42e-45c6-8583-92f419a9833e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="310" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="8157199a-c2e1-482f-bae6-0c52f0b8c59e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="355ae8e8-ac67-428a-8e3b-d087388dc607"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9b199184-e4e3-44d3-bd20-a19c2f206e2c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>69</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="43d40892-347a-4d68-bbee-9d80c9dfc755"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="fbbc9e4c-ffa7-4003-af98-87a4b5db3017"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000069",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "310",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c542e3aa-0683-4c33-951a-7f5f62bb7f36"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="a8b701fb-5cfd-45f5-800b-5458f08cef8b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ab519fb6-80cc-4e67-b497-175f03011855"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a129fc2f-bce0-43af-9e0d-f3822cb25910"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000069",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "310"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>resposta</con:name><con:value>69</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="be1871d4-3c9c-4a05-8ceb-324d8a9641e4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="311" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="dc931d07-1d3f-42f3-8273-74b2394fa30a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="26221e30-4891-48da-ace0-4e640676965c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="8050339a-448d-4179-88c1-cf76200a3f46"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="5ce7475e-6dae-4ea1-9f21-4d98c9c4d0ca"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="980a366f-335a-4612-80a1-900860702205"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "311",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="42a25733-a0eb-430d-934b-1e064df015db"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d8cdd596-79db-4de1-b40e-f7a3a513d4c4"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="c1afea02-5480-4d2d-8f79-e78905cecdb8"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f02f9a1d-1739-45ea-a7ce-460e27eea827"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "311"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="d5a41e46-9f3a-4190-95f1-f145de4d9222" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="312" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="e5596f13-6fd6-4db8-aa27-2e785951ecd9"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a7ed9a77-140c-44e9-b989-6e9e3b962f11"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2a34d8b5-7c91-40b9-9fd7-6618e0f07bab"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="3c04e0c8-bf16-4048-a4ac-e1ece16a7283"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="f34f4f85-8c6f-43dc-8cb4-ed4adca1939f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "312",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="1e2095bb-485f-4b03-9ae3-3afa89d766e8"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="4ddf9282-a3cf-4dfb-b783-a7179d47205e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="79b919c1-d27f-45d2-9bed-154298588da0"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e88b91b7-8e0f-4859-b90e-806f036d7306"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "312"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="49dad7ce-9d4b-4641-825f-4ddb2d276cf0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="313" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="3bf24082-c54a-4927-a197-20c31153a467"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a9b7fe8f-085d-4670-8573-1902ee3be9f2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="c4f241ee-56c3-484a-b1a7-0f05f5b7566c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="e9c1ba12-cdf4-408b-898a-0ec67b85707a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3f226d53-769b-40fe-8061-1a586b775ebc"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "313",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b1b35c06-9ae9-4325-b2e4-89cbf22d92f8"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e857d48c-123d-406e-9f69-944f124e2b1f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="c4d9409a-c57c-4975-8aa6-d09d008e818f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="1ca7dfec-a129-4faf-b92e-692db1d3d8fb"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "313"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="39d62ec5-5fb0-4aeb-bac1-559c60d2652e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="314" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="cbed807e-80a3-46ed-9c1f-bbff7b84ec41"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="9e583b78-29df-457a-b630-245c53ee70b4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="320a9e08-798e-4fda-b627-59d576d0966a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="1e9e4bc1-250d-4216-83c1-6a064dbb3f2f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="6338a36b-d7f3-40f0-8c54-66bb468c4c08"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "314",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="54b6a4f1-da3c-4436-b5e4-4497d419dad1"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="eacdff2d-05d9-463b-bd4d-43c80411f364"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="984e6a72-0060-45c9-87a6-0c8a8b9425c1"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="316b30a4-e00a-4179-b4d8-5652ba1759ac"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "314"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="e3c5415b-f5c3-48fe-8c6f-7383e740aaa5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="315" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="d5044b44-4fbb-4bb6-9b75-63da44ed3a56"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="8d6a579a-4709-4ef8-a369-2c3d22f76fa0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="d217c6de-5532-4aa1-94c3-61437f498d85"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="40718a3f-1c82-4151-94ce-5d0f2a3fd289"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="865e749b-f7cb-4604-8d5f-dda285816ade"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "315",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ac9b0173-09f3-405c-b639-c1740fb1dbcf"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="fc3914c6-f7fd-4fef-87e6-20cbb31e285f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="87acf113-39fb-4566-b9a0-d0341dfeffe6"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="b6e56346-04d0-4534-bb6d-713cf6dedc83"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "315"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="93d9e6f9-fba1-46d8-a2f2-33c36ab42883" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="316" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="cffacf8a-997e-4b34-9614-3f26ba2be7f7"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="667ab3f3-eeb0-484a-855f-888b761daac4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="fe2c4ccd-b33f-4523-926b-99dcab9dc7db"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="435b8e4a-9de4-41cf-9b27-ce948a5166af"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="ea85a5c8-cdd8-4e6d-a8d7-f4cb97f73006"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "316",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="876ba871-f1d5-41d3-90a3-00867534dbd7"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="8d121500-0980-4f3d-9664-9195ba31372b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e4ecb91e-b7db-4be9-9961-846939e4ac76"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="0742f8bd-477c-47fa-aac6-b8ad43c0f9a6"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "316"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="409d0bdf-5128-4a4c-8f35-6eea14e2f909" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="317" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="fb07d694-f1ae-4192-836b-7e4a0e8c14b3"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="ad1e8ca3-5304-4611-9295-06a30b5445ca"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="f74e0641-74c9-4074-80c9-100f770452ee"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="ebfb63cf-f058-4435-b566-4d7d7bd69874"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="36967e52-b0d2-40eb-a69f-4921e08692a9"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "317",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="7a03f247-2655-470f-84ad-6bcf7f84fb99"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f9825cf4-7a16-496e-9e56-bddf8858f6ef"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="8cc5d5c9-d3c0-4b3c-9df2-17be05aca1ce"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="61c3938f-325a-465c-b66e-05f66e9f06c0"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "317"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="9ff4873f-b1a8-404e-9fc3-06a012d86e3b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="318" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="bc05a13b-5bcd-475c-9a15-aaf560f426c4"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="f2dd6528-1a94-4ac4-8cee-68c76a1c3edb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="c4adbb32-17a8-4276-b1e1-7f0dfc4b1508"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="888a7c63-7ced-485a-a2b6-f73b149b48c6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="a77f9927-8f61-4f8a-92e3-d295be0b81ec"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "318",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="11158a2e-8e6f-4d04-849b-290189c076d0"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="046cfb2b-8f37-49f8-b159-9300108dc976"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="d3955047-53df-417a-b868-ea365eae6968"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="ff80d8bf-2c1c-41ff-9f37-beacdf08ec81"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "318"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>301codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>301distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>301cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>301tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>301resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>302codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>302distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>302cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>302tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>302resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>303codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>303distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>303cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>303tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>303resposta</con:name><con:value>21</con:value></con:property><con:property><con:name>304codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>304distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>304cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>304tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>304resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>305codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>305distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>305cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>305tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>305resposta</con:name><con:value>16</con:value></con:property><con:property><con:name>306codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>306distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>306cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>306tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>306resposta</con:name><con:value>33</con:value></con:property><con:property><con:name>307codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>307distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>307cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>307tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>307resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>308codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>308distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>308cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>308tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>308resposta</con:name><con:value>17</con:value></con:property><con:property><con:name>309codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>309distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>309cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>309tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>309resposta</con:name><con:value>41</con:value></con:property><con:property><con:name>310codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>310distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>310cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>310tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>310resposta</con:name><con:value>69</con:value></con:property><con:property><con:name>311codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>311distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>311cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>311tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>311resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>312codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>312distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>312cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>312tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>312resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>313codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>313distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>313cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>313tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>313resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>314codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>314distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>314cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>314tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>314resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>315codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>315distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>315cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>315tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>315resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>316codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>316distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>316cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>316tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>316resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>317codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>317distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>317cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>317tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>317resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>318codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>318distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>318cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>318tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>318resposta</con:name><con:value>74</con:value></con:property></con:properties></con:testSuite><con:testSuite id="e4c2f632-6a94-4434-b8ba-6f502292c0fb" name="Homologacao POR 5.0"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ec955443-cd72-4bb2-974b-030571851398" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="501" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="da6f8b7f-5001-4a1c-9319-130958d7fd1a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="ec6e2732-40df-456f-8621-f45eb9f41b5b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="8351bb39-4ab1-49a5-aecd-c61220ef5259"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="3d9569bb-ea92-4be5-bf05-199a57da0f74"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="dfa6a00f-5292-4b50-8e5c-6ca121a85a49"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "501",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c86b7dbb-5e5b-4ba5-863d-c3ab018b75ad"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="da9e3b6e-3670-426a-828d-c39d15d0421c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="a67af0ec-7538-410b-94c3-b2675ee2c056"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="92c6242e-e7de-4d69-af91-86ec2c850070"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "501",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="4838a4f2-e5f4-4541-a665-3aa1a9dab48c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="502" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="ab9c2003-a580-4941-978a-e55b1f2c069c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="786e51fa-0647-4869-88b5-d883638118fc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="1521912a-42e5-498d-9263-1b7c0024b1be"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="99a67127-d2a3-4dc6-8c95-fc3c914001e3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="4d3fc0bf-d250-44ca-9e30-bb517a5889cd"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "502",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="755a42d8-490b-4149-9628-d8e5c2a52207"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="0cea50b8-375a-4af9-8a92-065188c2c915"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="fd9dde44-0175-4a23-9da6-120e74e6b3d1"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="9d766c5a-1e18-4c02-84eb-75d9b3244792"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "502"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="fc39d656-b855-480d-86bf-e05ab7a499bd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="503" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="83a9eb96-edd5-4a61-8edb-60cf45e6cbb4"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="6da41609-1d02-4df7-9ec7-a37b9245c077"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9d877482-e4f4-42b9-a096-90a1b8a14efd"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="2f564d1b-9b66-4048-8a61-64f40aaee0e3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d567443a-aa7c-4da1-8679-d4ca1b71e17c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "503",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="9c62e8a3-786e-4681-aaec-ef6c6c644337"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5be613e0-a671-4009-a716-5c4b039d1e5c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="27fdde68-57c4-471a-9b88-540505221fd5"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="6529cf45-78d0-4485-b29c-0c5b9fa33c76"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "503"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="967e2e20-14d2-4c1a-a50d-7aaa0326b897" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="504" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="0fb7b4fc-4feb-427b-ab45-be400a640a2c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="4ff010a4-d6ff-4ca2-a8c7-ac8a6f43a25c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="91f7724d-db5d-4a40-9ed7-fdbc639e77ad"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="0b0346d9-d4c4-454c-9f24-9598099fe201"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="245b84be-b2a8-4e07-a5ec-5a973187acaf"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "504",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e30c6528-7aeb-42da-a175-81e521e9ecb2"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="0925de79-fd4f-499c-8c22-5aab18213c88"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e1dc7d1b-06be-48d6-a452-4ffa25bce544"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="916c2e8f-ac23-4df2-a367-03099c4455be"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "504"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="eed536a5-fc7e-4227-8afd-b0c6ff01d117" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="505" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="aff3d627-2a93-4ebb-92e4-9f171e53546b"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7db79d36-9934-4ed4-b386-2491595adae2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="cd00ccad-b618-4640-92e3-8f8818363450"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="99298c88-c9e9-43b2-b7f2-0daa0a541538"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="149116bf-b3ce-4960-8f78-29d14287ea83"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "505",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="66a67b64-dae4-4251-8168-ce2472b2fedc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ed90b1c5-f0ee-480a-a16d-4afa91c781d1"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="7c91655c-9a7b-47b6-8313-e744322def93"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="5c9fa910-2772-424f-95fd-d32804d590fe"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "505"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="37c388e8-fc0d-4d40-a7a1-94a751c0244f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="506" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="01df4459-1313-43d8-b71e-ce0032fa6c26"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="bf472a7c-083f-4c41-b8c2-9a63efee2485"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9b7aa03b-f23d-4e96-82bd-00b165f15ab4"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="8e315839-cb65-4ba0-a67b-dc676f9ff6d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="90880e29-6986-40cd-a017-678ae460a6fb"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "506",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="48ecc80d-913f-4043-b9cd-ccadf88205f7"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b60c7c2c-ca2a-4d02-ba3c-b5919438fb62"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="13ebb613-9cc9-46cc-ac01-cf113284ba52"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="c605f6da-f72c-4fd6-a1a9-fd6650bda12f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "506"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="c66fa0d3-2644-4954-98cf-53b3dfd1e256" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="507" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="f3fece54-5b26-416e-a9f6-d27a8ef509e8"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="239cd8d1-d8da-41e8-9368-9569139b6c03"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="911464b8-8bf3-4c31-998f-423779b832c7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="238c6e8f-464c-4dc9-9328-01a6e74af2f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5664f4e2-4938-4234-8dc4-ea346d32d208"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "507",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ebde2562-515f-41c0-ba49-8b6e3bd768f9"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="a25dbebc-f7a1-4ed8-a347-08e2a564e076"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="4d1da7d0-2180-476e-8875-760234667689"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="695360ab-4ad1-4a6b-9140-884026f3887f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "507"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="598e438b-8ef6-461d-a11a-726da140e127" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="508" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="49315d9a-62ee-4c55-9565-8103c8c199e0"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="fba72135-0c81-45fb-b3d6-722ad45a8656"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="4ded90bf-fd40-4009-999e-55bd91839f94"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="05ad6997-1202-432a-8d61-d227a945a768"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5a0e6c46-6b57-4558-93b5-11d2e289faf0"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "508",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e1fe8c52-c494-4d08-90de-a4656ec0c9dc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b98976dc-9c43-4047-88b0-4f0dbb461bcf"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="0fd90ebc-9906-4915-a9ae-b0b2e04a3581"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="1b0cad26-fad8-46ec-98ff-2e794e5c11c6"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "508"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="de014559-625a-48cf-82b0-ced80f15ea2f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="509" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="05834e61-5a28-410d-b2dd-3591de8204dd"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="599db178-8754-41f7-ae64-a003b3b20b07"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="4d086b9c-6864-4c44-9dcf-99a5dd2db443"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>34</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6862e501-c0a2-476b-aa49-5e4fbda7bed4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="eb2f0f57-1c05-4682-8204-ba2f07075f00"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "509",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="0e27d2b0-d83d-4bbd-848e-279126b15a42"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="3647ca26-e9b6-486d-8636-efcc6e63550b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="03b64082-b43d-4cbf-9fa2-bab65fb750cc"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f78f58db-882c-4da6-b6fb-007b17aaf5b6"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "509"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>resposta</con:name><con:value>34</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="413e9ff1-7aca-4e40-8861-cbd76ffcd41f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="510" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="ab688daf-d2c9-4708-94e4-c1d5d23f9f82"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7fcfe1ce-b976-49c8-942e-d7aa3327f9ab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="82236ac0-1019-4bb5-86cd-b90f56cbfa74"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="c229d39e-d1bb-44af-b88b-22f972c96c53"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="4bbd21ce-7489-4093-bb20-a307194dc9da"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "510",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="6d602768-533c-467a-b614-3f629d458aa9"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="c26005d3-f190-44be-9711-1d05484ed00e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="42316ce2-af56-40ef-8355-f44b858b608f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2d94b482-47e1-42a5-976a-8edbdf9e012e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "510"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="de6778d4-138d-42b6-8380-70723dee63a9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="511" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="db8dbd35-99a6-4a2f-b137-4125742357cd"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="41a35bf5-d26e-4070-a081-87d4611aea42"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9dffdd34-20eb-4509-8371-70d3626c3e72"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="20bc672e-b553-42a4-9471-8505e000e1fe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7700d1f0-5a62-40d3-a691-36e1c61d150e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "301",
   "pdv": "123",
   "tipoAtivacao": "0"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="22eb6808-22ea-4190-a72e-538a7063028e"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="452b9431-b5ed-49a5-b92b-668dadeb292a"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="2535f52b-cc4d-42db-a6ff-213d2227644b"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="19d666f9-cbd3-4be7-a9a3-16a6fa413d7a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "301",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>501codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>501distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>501cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>501tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>501resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>502codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>502distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>502cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>502tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>502resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>503codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>503distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>503cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>503tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>503resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>504codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>504distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>504cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>504tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>504resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>505codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>505distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>505cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>505tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>505resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>506codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>506distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>506cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>506tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>506resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>507codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>507distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>507cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>507tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>507resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>508codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>508distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>508cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>508tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>508resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>509codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>509distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>509cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>509tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>509resposta</con:name><con:value>34</con:value></con:property><con:property><con:name>510codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>510distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>510cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>510tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>510resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>511codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>511distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>511cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>511tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>511resposta</con:name><con:value>15</con:value></con:property></con:properties></con:testSuite><con:testSuite id="552e82bf-c022-4cdd-9702-82a4cf1bd654" name="Homologacao POR 7.0"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ad8f3f1f-8a4c-42d1-8664-76d9468dd30a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="e724f44a-150e-4b19-90c7-77d7540d4bc5"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="88c3a0c3-9d97-461e-aa0f-256adb345c24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="59c216a6-d1fa-4ecf-a3d0-c1ad2b9702cc"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="09b2cc1c-77c3-4c1f-81f1-6ea9c82a374d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d804a6e1-bc50-4746-99c1-e370143b6a43"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4e4d763b-0ef6-4c9c-a1ae-9e9c1dd69f83"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="47e80938-0d23-44f6-b848-7bca3057346e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ea52bfc2-bc76-499b-9633-7dd8efcc650c"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a424a9ff-2bc8-45e8-8ad1-5f27511838f1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="5afd4682-e541-4bcf-83e7-15fda909a4da" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="706" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="025eda1f-086e-4fa4-a41b-a60782d4268f"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="992e5777-1bb4-4021-b49f-d6b87b560e21"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="abd175c6-18b0-427b-a87e-9c5881823542"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="24ccb2c3-2f41-4815-ab3c-3a4f53f90fc4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3069d727-b10a-4223-832f-1beaab9e0515"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a22b194e-f90f-43e2-8a2c-b03e95a04f3c"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b28f1a28-1cef-4426-8d8c-5f60bc3750a4"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="b2b40dec-1c3c-4e73-99e9-7bd7693946d2"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="3426c6fe-9922-4215-938c-5b13983beac2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="9fd2f9c9-4594-4c95-806c-786020818874" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="707" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="75e5d5fb-9804-49d7-aa42-c56a6963e139"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="d7de71c6-042a-4255-9d89-ab0b70166b9a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="020aa679-b936-442a-999f-a8773349c845"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="40a67548-ce38-4295-a788-9068e8de096f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e97d29f1-f422-4479-8689-56a033e8b24f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="3990d39c-76e1-4e00-bc3f-a02df9871389"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ff49572d-677c-4cbf-a4ff-30f495088e9b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="83fd3aa2-ec65-48e9-a684-9b7b5cc14a79"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="22d13c75-c6e3-40e1-98db-1c7fa6666b92"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="1dfd0328-636c-4638-9492-9588824bef47" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="708" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="a424c3d0-d584-4c9b-98f0-bc7d292bfe8c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="bf6e668c-2d13-4f42-99a4-70918f1806d0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ac4d6ee8-51ff-46c5-b9e9-7f34fa04b60b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="1852298c-aa0a-45c4-974b-8ef2358d1b3f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="ff75c728-ec9d-47e5-b0f1-b865cd041286"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="af352395-4a03-4171-8b45-8e58ab749939"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="a29d2cc3-8675-4d20-8339-c4e5459e7881"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="0752dd29-29e5-4396-8f8b-8db86b10e2f5"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f3045ec5-ac14-41b7-a5cf-8f525f3e4c03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="d9c77e46-56cf-4e14-a974-afad64bee3ed" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="709" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="da3dd014-9326-4488-9f50-69f16582ecd9"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="67f2e1cc-c4b7-4218-a846-102be113dd4d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="392547c7-d066-4d43-ba9d-63d68d5c5005"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="2090d36d-e138-4f7e-8eef-5e3e1171d0e1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="ffa06b6c-91c6-4915-89c5-70905dd3d569"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="63306029-0534-4976-a56e-8dada31047ab"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ee6df169-9f15-4767-a80f-c4c88e79e7ce"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ae19ff77-a79c-444a-959a-36aab4c887b3"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2066332e-e4d0-4017-928a-44aa23af275c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="515a45e2-63d3-4d9c-8aca-a40230dfaa9e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="710" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="3e66345b-e24a-4441-8d56-53c66849a793"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3d0729af-bbee-41c1-bf05-32d3c5a905c2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="a8c4d50d-16ea-4fd2-a016-1168e7e944f6"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="64c31482-71e0-4474-b94a-9ea0ffa5aa7e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3f0fb0c8-5184-48ac-b78d-14e41ad98f6e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="7feff006-94b6-4279-8aa1-11d9060aaee0"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="6daecad0-3b88-4c2b-b4ed-ee4432cc8b59"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="8b489944-f189-4735-bdcd-95cc17bcd423"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="72e1033b-60b3-4265-9971-064029121d62"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="2acc4791-6222-4deb-b975-dd8371bbf367" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="711" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="840c39b7-5e3a-42e1-93c2-cdb77c30146e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="faaa2282-da57-4d6b-aa02-459a6a09d83d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9f50c8a5-0e14-4cec-943e-c6464027027c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="dc8efb53-8803-40a1-a151-a323065c90f9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="ecab6039-dac4-48f9-b754-1fcf6511ef86"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="3a81efc1-0109-45f5-8c56-5c2667e630b6"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f0971586-d2a7-42ef-b4f5-b64c7fd3c548"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="944b0e0f-cf66-4896-9935-0994bfaa3a28"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e0e1b435-bfcc-43b4-abb2-058677d40b4b"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="c8a4ba46-b6b2-4300-aeff-dba49a7f700b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="712" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="df48dfc3-5b8e-48d1-8d96-7671b9f3199d"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="349913a6-9cab-49f7-931d-069cb3d27e8c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="c37b5601-a5cb-4d0b-bf39-ea5df4834b08"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="b777d6fd-2cd6-40b5-a023-fd641f0f417f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="b639b520-9ecc-4973-ac50-1177d6a9614a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="33b6e28c-e99c-4b3c-aeaa-871db7ea3b3e"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ba56207b-b416-4e88-846c-36f21a13e03b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="aaf34383-db3f-4983-8264-56d963c81f9b"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="56aea4e2-f44f-461d-ac8e-dadc3b93369e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="26b17bc6-62f5-411c-8dd9-ebab4e68070a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="713" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="ee77dcb0-304b-4d06-9ffa-8a9d3ce04996"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="bb1d2a1c-08e1-452d-b7eb-22b41f1b07de"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="db007afe-a233-451c-b689-1ee4b7e1d589"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="78567337-8abc-41e9-acfa-995fa18cf132"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="56e3f6ec-3c2f-47b6-99d3-db6839c2e16d"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="0277db12-97b1-4c5d-88e6-22dbb168acdf"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ec57c733-3bfe-4f05-b345-6d18be7f2447"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="4e12ffc9-dc04-48f6-ae50-7690b6d5db58"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a118ba69-2ee0-4e7c-b5dd-f194d0d85ff5"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="0488bf09-7809-48b7-9687-81c66c09828c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="714" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="87a71dbc-8397-4618-9a94-f7d6e354c2a4"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3712e043-df73-4e36-a21c-2adc6d481165"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="004d1549-71fb-4aaa-a552-d733fc6dad09"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="8ef3bfad-ff8f-4374-9e39-c9ba0368db82"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="601478d2-a722-482f-95dc-fb762d5d845e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="928248d0-b1be-4c35-b365-5b3937bce56c"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="36f581ff-bf0c-4b7a-9264-c6efdfb01170"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="caa564df-a44f-4562-a33c-1d8405c1dca8"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="b84bbacf-48df-42cb-85ed-f84845ff8a03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="463f4375-4da8-400d-b3e7-56bb520cb5d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701_3" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="781e2d38-99a3-4c72-ae25-23bc10733581" disabled="true"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="763cfe9f-4e71-43d1-9799-638b08619043" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="90342594-1777-4786-b673-14596ad6e6ac" disabled="true"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="e81f03ab-b7ae-41e6-90ae-72cd6d93411a" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7a10f807-8942-45f4-9a43-62f68040bc6a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701_3",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="30adfe7e-2dca-46fa-a480-08752a50a1d5"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="068ed63f-518a-467d-80a5-6a981d83337a"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="fe3376f2-0cc9-48bf-bad5-534f6e59bb34"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="766f4461-b5a3-4242-a293-4d0210e8324f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="37f8a152-ba83-40df-8e0b-4e0207fec635" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="716" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="7b71c3fa-338d-4ddb-9530-3ef610b7d0da"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="72259122-36fa-4021-8512-7176dd80b1aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="aaf85d7a-96fe-4bf9-9f87-5623abad195e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="386854ba-c3da-414d-b3c0-e2c1a74d9bb8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="83c8c67e-1dc5-486e-b675-124a9a119bb3"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="9d6d0a33-6a14-4541-8f12-e3ae5079b753"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b57bc87a-ad0e-410b-96d0-a3b970f3d938"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="7b3e7d12-127a-45c7-a9b2-5b0856ee133f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="dd3db807-f60e-437f-9cdd-44d2f5863e03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="b6eed4cd-1aed-47ea-b075-caf1a62fa813" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="717" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="b67a184b-902d-43f2-87eb-91f1514ed091"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7fd01bfb-82d6-44ae-96cf-fa63e41703fc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="23f5853b-f1e4-4ecf-ac5f-9d829f63a3a5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="a8cf4057-4805-4761-ae6c-8fe2cf2edf6e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="f3879cd2-ed7a-4ebc-9a66-3055149f67ba"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="834ebd76-a949-410e-8a4c-9c7e87ac9474"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="7fb07423-fc7d-461a-8900-0b5228bd1023"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="a4a08d1c-4bdd-4cf0-844e-540bf8e2d091"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f9a6c544-5831-4734-858a-60dff2830a64"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="31b0c93d-585a-4b7d-bc18-8ec6780807d9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="718" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="25658448-e0b6-4402-b3a7-26360d39c6f1"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="47522862-6d3a-4f41-ae8c-e93a3ed0ae19"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ccf137bf-4c7e-4ffa-a23b-7b47ccef3663"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="2d206a1e-9a19-4020-8374-f1939072cbae"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="bb2b751b-809e-4952-b5f3-9101841cb74b"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4655f419-f56c-4b31-bfad-045867cf4e27"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="36642fd0-fe4d-4653-b22f-c13ce1fd51c8"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="dd1233d4-3c3b-4368-87b5-fdaf9ba612d9"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="49602fe5-8d98-4857-9e4c-10fa4442f4e8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="0d3bb744-1198-49d6-8b3b-75fc2545ce8e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701_2" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="f3706dd8-441c-4222-a564-a17094fe057c" disabled="true"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7c34bd60-392e-40fb-8bde-bc0996d42689" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="1ef04e56-1004-466c-a556-652be25dd39c" disabled="true"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="c500cc2d-21e8-44a1-8614-a3dc451f75e3" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="b95eb792-ce14-4238-8082-28a659ff918a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701_2",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="028419ea-5a38-4ea1-888b-d8ec6d4accfc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="283bf016-149a-4018-8410-7031645fec90"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="1ecbabb4-cddf-4603-9b3e-4ddee80dce88"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="afff694b-bc10-41dc-a897-21de3beea7fc"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="4e1f1a27-29fb-47e8-82b3-267f3c86da65" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701_4" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6ea36bd0-3426-4d03-8ad0-f4f0e1f56d46" disabled="true"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="d68f949e-03e8-407f-9db2-7d6caf1c2cab" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="45f4ebd3-aeab-415f-affd-75d9881e3138" disabled="true"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="4deb24da-032b-4c2a-99ae-30717faa69f4" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="68fbb674-94ec-4dd3-955b-699cfdb172c4"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701_4",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="634c4d49-1c25-4137-93f6-ab855560eabc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="fd53b605-6065-4448-9941-f859507848d1"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e3ebc544-248a-42ae-8e1b-4f1852157b24"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="be3c39f5-a59c-4c25-b61e-1241951a2803"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="2b0f010b-f9bd-40ca-9040-ad2dc5a7f77f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701_5" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="8514e8fb-da60-4ae3-8e6c-2bf16df83014" disabled="true"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="c0363b6f-6dbe-4358-94af-de05e3681db1" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="dc05bcec-5a19-4ade-94fb-6f9dbae75a56" disabled="true"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="b9234c0b-d600-430b-aaab-7b62e643ec96" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="ae21e0de-61d5-4747-9fc0-43c2fda27936"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701_5",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="6021bf8a-81f3-40cf-8fdb-60f315dc4984"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="783598f8-443a-4f9a-87ed-5cc228bd1564"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="b68b6277-e88d-4a78-b0a8-41b15fa4fae3"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e7af61f5-4832-4641-9c61-8c3229392248"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:properties><con:property><con:name>701codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>701cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>701distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>701resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>706codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>706distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>706cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>706resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>707codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>707distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>707cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>707resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>708codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>708distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>708cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>708resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>709codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>709distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>709cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>709resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>710codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>710distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>710cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>710resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>711codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>711distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>711cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>711resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>712codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>712distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>712cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>712resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>713codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>713distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>713cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>713resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>714codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>714distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>714cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>714resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>716codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>716distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>716cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>716resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>717codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>717distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>717cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>717resposta</con:name><con:value>14</con:value></con:property><con:property><con:name>718codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>718distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>718cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>718resposta</con:name><con:value>59</con:value></con:property></con:properties></con:testSuite><con:testSuite id="1ab39c50-cc48-414b-9f2c-822d9a2e3bb6" name="TesteCompleto_antigo"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e83a149d-abd7-449c-b18b-ae0e224ea508" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Cria Banco de Testes" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Testa Conexao" id="9c1be0b4-f99d-4a63-ae14-5bdcebf9a6bb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://201.65.240.131:3306/mysql?user=root&amp;password=root</con:connectionString><con:query>SELECT count(*) FROM db</con:query><con:assertion type="JDBC Status" id="8ae59bb3-1e6c-49d8-9d92-4730c2b01cfa" name="JDBC Status"/><con:assertion type="JDBC Timeout" id="88d8d9b7-0641-4bce-b2f8-402fde11a825" name="JDBC Timeout"/><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Recriar Banco" id="6db4da1d-4952-4096-8860-26417a269940"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/information_schema?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("SELECT count(*)bancoexiste FROM SCHEMATA where SCHEMA_NAME = 'enterative'");

def bancoexiste = res[0];
log.info(bancoexiste);

if (bancoexiste != null){
	def query = "DROP DATABASE enterative";
	con.execute(query);
}
def query = "CREATE DATABASE enterative";
con.execute(query);

con.close();</script></con:config></con:testStep><con:testStep type="manualTestStep" name="Ativar Manualmente o Servidor" id="775b8614-84e3-4f90-8acf-e89f13ec35ce"><con:description>Inciar o Servidor e aguardar mensagem do echo</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="groovy" name="PopularTabelas" id="faddc498-bd3e-4f9a-a197-45bda3340fdb"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");
def query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401908' , 'GCMV IMVU 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401916' , 'GCMV HELP PROVAS 19 90BRL', 19.90)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401188' , 'GCMV FACEBOOK 25BRL', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401189' , 'GCMV FACEBOOK 45BRL', 45.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403309' , 'GCMV GOOGLE PLAY BRASIL 15BRL', 15.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403310' , 'GCMV GOOGLE PLAY BRASIL 30BRL', 30.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403311' , 'GCMV GOOGLE PLAY BRASIL 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403312' , 'GCMV GOOGLE PLAY BRASIL 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164404845' , 'GCMV HABBO ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405063' , 'GCMV RIOT BRASIL ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405061' , 'GCMV RIOT BRASIL ASSISTED 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";	
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400391' , 'ROTEIRO HOMOLOGACAO 7', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400392' , 'ROTEIRO HOMOLOGACAO 5', 25.00)";
con.execute(query);


 
query = "INSERT INTO distribuidor (iddistribuidor, nome, cnpj, cpf, endereco, bairro, cidade, estado, cep, telefone, contato, email, situacao, data_incl, data_alte, observacao, acquiring_institution_identifier, merchant_identifier, merchant_location, merchant_category_code, point_of_service_entry_mode) VALUES (142749, 'Chart', '42767525000105', '', 'Rua dos Guajajaras,977', 'Lourdes', 'Belo Hol', 11, '31360060', '', '', 'andremelo@chart.com.br', 0, '2017-02-02 17:31:40', '2017-02-02 17:31:40', '', '60300004684', '60300004684    ', '                      Campo Grande MS BR', '5399', '041')";
con.execute(query);

query = "INSERT INTO usuarioweb (idusuarioweb, login, password, nome, situacao, distribuidor_iddistribuidor) VALUES (3, 'chart', "+'"$2a$10$xkdQa3ulII0gM22Mz4mXOOqdyInLRajplnugCN5jmcdNsEjF4PARK"'+", 'chart', 0, 142749)";
con.execute(query);
query = "INSERT INTO usuarioweb_roles (usuario_web_idusuarioweb, roles_nome) VALUES(3, 'ROLE_USUARIO')";
con.execute(query);
query = "INSERT INTO servidor (situacao,descricao) VALUES(1,'HOMOLOGACAO')";
con.execute(query);

query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),0,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),4,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/reverse')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),6,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/network')";
con.execute(query);

query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TEMPO_ENVIO_CANCELAMENTO',900000)";
con.execute(query);

con.close();</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7a3581d0-e6ed-4fdf-bffa-39ad43988027" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="501" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="e4802ac0-a0ef-4841-b1a5-1c450e8abd2b"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="764bace8-63c6-4caa-b4ad-6df46c463aec"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2beda7cd-ba1d-4027-b704-d94eb50c8014"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="20e0f8b9-813e-48e5-bcdd-13df2ce3aa39"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7c16b2af-56f4-4082-845e-ae8a5395362a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f05b2f1c-a94d-4266-abe4-b514352639e3"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="0e2ff28d-b0c6-4d6a-91e6-728a5c77e6a2"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="f41bd93d-6912-480a-a164-db5d270edf3f"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="1983df6a-dcde-4f39-b084-c364d080ad99"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property></con:properties></con:testCase><con:testCase id="8be2f376-3f63-4d01-8532-84ba28f612b0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="502" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="16d52feb-4184-4bc9-806b-a7a5c6b7858e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="95e64069-31e1-42fe-ba99-ec75e838b2e1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="e93530f4-da83-4a78-a916-71d23e9afb24"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d359bb0b-561e-45a5-9646-0b8e12ae80de"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d38a5c64-5399-4686-b5a1-7fd38950fd39"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "502",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f2192112-05ac-430f-8e48-5ba2b97c6968"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5e5174a2-d031-4b45-b327-69cdf759d495"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="dddf1720-3878-4243-aa61-f50a6c2b3b42"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="41831690-a3a7-4ca7-b34f-6f17c9c236a2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "502",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property></con:properties></con:testCase><con:testCase id="f1cc4803-5015-4152-99d0-7937afbdc54c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="503" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="535a616e-fb5b-41da-8ecd-45575950b853"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a7aa0808-b2f3-4aee-81d5-816131ff49a4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="efae4a38-0f5b-4469-bac1-b2c6cc97e55c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="5fdf8575-3350-4141-804b-bb0fcc037798"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5f548b5e-b941-4072-89e8-e0d68aabc965"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "503",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="1ba4af40-4c1c-4927-b1cf-e883bb97070d"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e5f4bd0e-e23e-42fa-a378-e098c6a1340e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="91343b71-d0d0-4b33-919b-4c9e1e3239eb"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f50b6bab-fac2-426a-aae5-b25b6f08b8a6"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "503",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property></con:properties></con:testCase><con:testCase id="ae4b5ed4-a378-4510-a67a-be9aa3907645" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="504" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="5369edca-19a8-4e5c-bad4-2e7558c1cf9e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="61a74df6-aed7-4b81-943f-0dc5fa53cd30"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="71227d28-1f8e-4481-bbc7-992e39d0f10e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>58</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="93b5a809-6bdb-468d-9218-56607cc6ca98"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="adb4d359-ecd9-49cd-8489-37b2541c49df"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "504",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c4fa3785-e942-4f65-a4cd-e25ea320b54a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b125f922-adcd-42aa-9ce8-392e1233ac3e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="08fc2253-956e-4df0-856d-4081bc235ad1"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="71a5da2d-b42c-406c-a662-bb5c7bed98fa"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "504",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>resposta</con:name><con:value>58</con:value></con:property></con:properties></con:testCase><con:testCase id="07b4d0fa-bc11-4d07-9959-91743dc976c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="505" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="2daab2ab-7e4f-4b25-abed-52643120da1c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="50070b7e-049c-4ae9-8a50-1d11e33bb8da"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="745629ca-1cdb-4277-a857-72fd09b51107"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="2a1c9460-6745-4df0-9112-af6e668d2a7d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="23a4bafb-b1aa-4511-ba93-39ce41c5ba24"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "505",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="eaf651d1-6a68-45d9-98af-87bc9a99077f"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="03e22610-048a-4363-a167-cfc4d8bc9ae3"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="835a255e-dab3-4c09-abb9-c7f729282fb1"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="6215359c-2103-4ba2-b750-72d2bb00ab83"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "505",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property></con:properties></con:testCase><con:testCase id="42ef3d43-a7ad-4bc2-8636-9158efd5eee3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="506" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="651189ff-af4a-47e9-99bb-41dea52f886f"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="66224913-428e-4d7c-ba62-d8a2428ac7f4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="b2a282e0-d17d-4040-8cf8-81173c09aa3a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>94</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="55ab053a-ae21-4bee-9f33-dd6583c4b10c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7afa7a96-157b-4a2a-abce-82da2e07032c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "506",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="18e71bc1-75f9-416d-a545-7a69bbe19160"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b94aed77-bd86-4751-bc60-e6fe2df0392e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="d67c2d7a-d4f4-4653-af89-26f42d687002"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="8a79276a-59f4-4522-b932-fd4128590fc7"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "506",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>resposta</con:name><con:value>94</con:value></con:property></con:properties></con:testCase><con:testCase id="12b3ada1-a331-4976-8a4e-45bf2cabccd2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="507" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="02aa7b7a-2de2-4233-ad2b-38c0fda49b0b"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="f28c091c-006e-431d-bdfa-71dee85551e2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="61c06272-f9b7-4d9d-be33-80406f3fe3ba"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="72ba1e1b-c888-4299-abce-859e0196aae8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d79da252-8bf8-4c09-8e27-3caab47166ca"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "507",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="2b8ee245-dfe5-4e33-9a9e-974f7651143f"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="3a347f13-955f-4470-9f87-a5fb288ea97b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="29bbb4cb-e057-4add-8ccb-73af5eb7d427"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="05619c76-da6a-4160-89a0-b5259ad4005c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "507",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property></con:properties></con:testCase><con:testCase id="451ec3bd-0e31-40f0-b167-1b5f2fe31f77" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="508" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="d29785f4-5da2-46fc-b831-7cf7fffa8ff6"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="efc16f42-86a2-4e60-b850-eed8bc670e5b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="8fb862c3-0628-4b19-9b28-6cf056de38e0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d8a89fca-129d-40fa-b076-2ce8bb485b06"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3d3d4e24-6576-42e1-888f-4b910295fd7d"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "508",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="3abd5884-accc-4ac1-a9a1-2ffc47922a83"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e04317f6-f559-4387-9e05-bc367d8e3b03"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e589ed7e-808a-40db-8378-9b8058a7ff74"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a1fddd2d-f539-4b1f-b092-50ab0fba33ef"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "508",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property></con:properties></con:testCase><con:testCase id="78daff0e-a85c-4b5b-a9e1-4e5d7afb738b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="509" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c868c1c1-e1a6-4d19-8c34-ed12b8a503c1"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="b77e5fb5-a263-4ff7-945d-54a9e2574b90"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2b885a3f-a0cc-4ad3-9cc3-3ee03333b0fb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>34</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="79ce93ca-f0aa-4bdc-b719-901d8cf93a71"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7346bf9a-aaf1-422e-835c-e6148d83da0e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "509",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="257c5f49-f771-4e3d-83b4-6d3e246c9497"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="4a925b44-19f5-414b-9e85-144c38e848d1"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="1d6e96c6-e24c-4317-ba56-dff49450f60e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="3ae6518f-45d9-4c20-bc9a-0218ac2a30bc"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "509",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>resposta</con:name><con:value>34</con:value></con:property></con:properties></con:testCase><con:testCase id="61ba7c3f-ecc6-4859-afdb-5ccfb26e2aa9" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="510" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="2dd338ba-6566-448d-b47b-46cea3329b2d"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="58245a8c-2f74-4e92-9e2b-43b355c02f79"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="8569c703-6e32-4ac8-a82a-c5d5f7da206a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="224e97df-ab39-4ce3-bffa-3b9742ad8059"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e2f00bee-9414-4124-b1a7-4e835638835e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "510",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="441528c7-c401-49ab-a447-33bc071806a3"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="635447c3-90d9-4a59-a87f-3fba16a2d3a7"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="d0c0346e-d1fc-43d7-a190-c7b8d72898b0"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="cdc62dde-64a1-4000-8abd-caa5703dd412"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "510",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property></con:properties></con:testCase><con:testCase id="b3819dd7-df4c-4c47-8616-cde2098015b2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="511" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6933ff9a-549a-4621-b524-bbe50c7aba50"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="4f1c85b5-36dd-4e3b-ba91-f1ed450ee51a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="e23632b4-3fcc-4480-87a0-c4ea7ae36e92"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6933d5b9-b2ae-4387-b782-f9b6a0c75eb9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d4617f78-cbcd-470c-bdee-b3c767a46f4f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "511",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="be3b4e16-3014-4482-9fb0-974d885af596"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="665dd8c2-5759-4f79-99bd-f1365427903b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="95bbb205-0f3f-4307-800e-682b6f354eb3"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="cae6ddad-d725-4582-bc26-45a2cef84f10"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "511",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property></con:properties></con:testCase><con:testCase id="fe976736-5647-4b65-a868-07d8e5b32e5f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c176bc98-9853-43b9-ab35-95fa0a196f56"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="89998c32-91de-4a91-8575-6cdc141facf2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="5dc61e7b-50a0-469b-a874-6be98abcdc89"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="685de019-8fe8-49b5-91c9-cdb404349ca7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e5268fd9-fc25-4da7-9025-709c529961ce"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "701"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e893e495-8468-420d-9dc0-0b526b55c6fc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="1a0639ec-ed7c-4183-a69e-0c083c304f22"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="b73516e7-4305-4581-9a60-70cfae964968"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="975dfcf7-284d-4393-afe5-2ee57dfd6c98"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "701"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property></con:properties></con:testCase><con:testCase id="83d73316-6c6a-4dbf-a517-27fd512dc0c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="706" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="56c6ea1d-09b8-4377-a981-f5a139f94211"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="ed568551-bd9b-41e1-84ed-5ab5aaf1a920"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="7e9a2946-90cc-4b55-8406-45b635ce7be2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="0dca34d8-f684-4127-b0d8-372fdff0c24a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="cec40d1a-86cb-4ce9-8b76-f06a45a63105"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "706"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f1b45ed9-5ac6-4603-ac9f-06f32f2441ac"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="aef487b3-c190-49e0-9b0c-06e294bf2c53"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="1c2a69eb-7ddd-4b0f-b01c-56f2d04d6c45"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a56eb824-44d7-454a-a0fe-003ddb26f5e1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "706"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property></con:properties></con:testCase><con:testCase id="30a60604-857c-4901-9951-ab409fc0713e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="707" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="4c63b6d0-4117-4ed3-9c2e-b8152b26c001"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3f6c911d-a9f2-445a-b3c3-eb135bd0e722"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="74704304-bd8c-44e5-a07e-e917fffec6b4"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6f679dfa-0023-4af0-ac05-2ab83fab8274"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="78cda3d5-54d8-4c36-a140-2d64858d28df"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "707"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="d12f7285-471f-4de0-833f-95ecac5d8c94"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="fdfb6dad-0bc5-4799-9633-31f372842eef"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="46485163-c0a6-43c1-9563-c99201436e4e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="d742957c-d5ba-4fb2-8b6a-a3701f9acc2e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "707"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property></con:properties></con:testCase><con:testCase id="689c693b-ca8d-467f-980e-db8951593ade" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="708" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="d8439e72-837f-4626-8770-ac2639a38978"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a3123b7d-c313-4cfd-ac37-2fafc0bfd10c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="a32394f4-1f1b-4d78-a71f-716854fc54ef"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="8fdfdb6f-5a00-4e29-8782-75834a3be168"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="4c579637-80fd-4078-970a-dcbe6248d2b0"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "708"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f5290c32-439a-441a-ad3f-1df2e0fb9c8d"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="99bd0d5a-fe33-4c46-bfd3-b647dfbfdec5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="9b4eddc7-7d07-4241-8bad-2a8683f1b47e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="5fd00f6a-7cde-43ff-b15a-e555236ad2f8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "708"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property></con:properties></con:testCase><con:testCase id="6438725e-cae2-4068-8312-e5e6bf040d56" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="709" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="29b2a4c9-5898-4432-9cb2-d1ae3fa7dda6"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="2043aeef-ddbb-453a-94dd-f1071b40afa7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="11880df8-7140-442b-8e02-edb5b407e07f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>58</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="517d734a-b68b-42cd-bdd4-bac87f93f4d0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="cb5f68c0-d030-4751-add2-0e027f18ca88"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "709"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a3cf0511-2e8a-4241-a0c8-ba8ed08b97f0"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="2d6d0099-2085-4bde-a700-d39fc05e2778"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="002881e5-0c07-4ecf-8c4e-b960f267210c"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="1245e9ad-e78c-427d-8960-cf5d1977b62c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "709"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>resposta</con:name><con:value>58</con:value></con:property></con:properties></con:testCase><con:testCase id="42ca0cc6-53d4-4173-a679-c5acfa3631b3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="710" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="8c2d65a1-eaa6-45ca-bd3d-6e27bf885fd8"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="6a7da568-f440-4449-b60c-d4d671049e0b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="9af3eeaf-d2ab-4495-a40a-3e5e0827f687"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>94</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="45eee7d2-643b-4cd8-b64f-0bcb692aa66f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="a2cfe47e-9220-438a-bee8-9996bae3be1c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "710"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="da6a8994-2a36-4690-a256-c6acd66b44af"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="42e3cd7d-8443-407f-86e3-6c009ea447c5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="83e46fae-339c-4ed3-b12d-30c3b2c68803"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f5c9a2f7-78b0-4ebf-b5c4-05e853714c94"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "710"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>resposta</con:name><con:value>94</con:value></con:property></con:properties></con:testCase><con:testCase id="44ddddea-31d5-485d-bc0a-fbb3531800e5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="711" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="7a92938a-2cc3-4730-a3a4-f0ff18d55015"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="c8782179-9f17-430e-aedc-68366e733e6d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="26893a09-62d8-451a-ba0b-2d40bf9cb1f4"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="7905a91b-5659-4ea2-986d-a94bb3255383"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="9bee97b2-3269-42ac-b2d7-66c41ad99960"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "711"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a6b64252-f70f-4dfe-9447-389937a4c251"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="530b19bd-43b4-472d-9531-48b26e7fec79"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e4531a10-ea6c-45a7-9925-410fab76b240"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="64cf5445-87ec-4fed-9c34-c6bb89564302"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "711"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property></con:properties></con:testCase><con:testCase id="575b0ace-c278-485a-aebd-aa8c0a0bc4d6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="712" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="5de008fa-eaef-4257-ac5f-74ec96479037"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="af712adb-bc25-47ee-a530-2d40ce10bbcd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="c55af87d-bfb0-450d-966a-b09b3582f15e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="70fe524e-9182-4781-8e7f-f797cebf6803"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="2986409c-8b77-4be1-a8b1-349c409f6f5d"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "712"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="18a42b2b-b91a-4c8b-a883-fcabf6c1416c"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="79bef249-2411-4c2e-b204-d4f71f326500"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="d80b2c91-0bd3-418b-b520-9b19ade0b509"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e6c4f41d-79c8-4e50-9363-9ec7f2f0d847"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "712"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property></con:properties></con:testCase><con:testCase id="ccd9b3fa-d924-4001-bf61-d28e913f2072" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="713" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6a4b458d-44d8-4a70-b077-dbaacb98cea1"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="81b0248c-8e51-4f83-84e3-dcae0e42b2d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="af9d707b-0b4d-492f-8a8c-be3dc30bd06e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="366e5d3f-2d75-4322-a324-9588d1c81aac"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="92ffa698-a8be-4aea-a8c4-233ccaa3023f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "713"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ff13ddc4-fff7-4df3-b114-a51b3c8c0417"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="bad63107-10eb-49b1-a604-4c53621fa927"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="81cabfdf-e062-4cc8-92c6-bfe51bc99e47"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="7b1bddde-5675-431b-b33d-a584ca71142e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "713"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property></con:properties></con:testCase><con:testCase id="67b0bbf4-7111-45c5-a53a-56d4ce74a8dd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="714" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="1f55e4c1-ed31-4ad1-aae9-db0b0c789e0e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="8756e2c5-390c-472b-a84d-951fbc066a38"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="b697beeb-f76a-4ccd-a2b7-64228b0bd35a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f11aa065-160b-49ae-8643-3e74c964aed4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3dfb2663-ce5f-4dd8-9c11-21d5a79dde03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "714"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="99299737-5506-485c-980b-c839bc074092"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="819a80bc-c014-4f54-9cef-1df5e03bbbfe"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ca8db1a3-3e67-41d4-be75-ca9f8833211e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="9d323e91-b4d0-44e0-b947-e1a659d7999a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "714"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property></con:properties></con:testCase><con:testCase id="19f8fdd1-d9c9-491c-9b95-247a508fab34" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="716" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="3313fdce-dfa3-4878-be7d-d68fc6bf1f76"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7ba41c92-2569-41d8-9f6a-f520d45bf97e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="36411834-2672-402a-a585-43ac68d40ef9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="1f8a9277-5bb2-4c08-b306-f30953edfcd4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="252ac89f-e816-48a2-b3ab-02a5b2744389"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "716",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a7f601e8-74e9-40bd-8fe6-4365bc9f56e4"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d1c9c65a-c430-414d-bdde-d10909201d4d"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="9bb9b846-8c9e-4d25-a788-882c88467a97"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="b780d7a9-57e0-4c3e-aa52-c589d2d4de00"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "716",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property></con:properties></con:testCase><con:testCase id="516967e0-e210-4df6-aea2-ec819be231fb" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="717" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="78c35697-2808-411f-8ee0-07da325c9406"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="9751acb7-7ae5-42a9-a21c-2eb59564afab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="d0655254-f1e0-42e4-8de4-14456b0880f5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>14</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="0836cb2d-39c9-4479-ac5e-7a9de1eb3a85"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d5885a4f-054c-48f7-a762-4240d51e302f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000014",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "717",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="2ef30a47-6e18-48c2-8c7c-380b3098801d"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5abf6ce8-c094-4b27-989a-cf01db9c01ca"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="d2d08249-2f8c-4366-bcc9-3baf62e35043"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a5beae46-555c-41de-8d05-a8fb9a6adab5"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000014",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "717",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>resposta</con:name><con:value>14</con:value></con:property></con:properties></con:testCase><con:testCase id="69b73ed4-3435-4a92-9bf4-0b0fa202b906" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="718" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="16d680a8-2e4b-4f99-9cec-6df3c7d5a3d1"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="f0426e86-ab8b-43f1-9e36-d2a9b6e7a505"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="19b29687-aa9e-44c6-85c2-904cc0da8677"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>59</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="bbd436c0-1145-4e8f-aa6f-a66fe7012532"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="f300a6f2-fd97-416b-b55f-3731fea595e1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000059",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "718",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="22775c41-802b-414d-90de-915c183688e0"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="fbaaecc5-344e-44a9-a77a-f20fa203761c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="929fa84b-c49f-46cb-acb1-085f95491e64"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a521acbc-2fc4-4f5c-88bf-5e6abdfce179"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000059",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "718",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>resposta</con:name><con:value>59</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>501codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>501distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>501cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>501resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>502codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>502distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>502cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>502resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>503codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>503distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>503cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>503resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>504codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>504distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>504cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>504resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>505codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>505distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>505cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>505resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>506codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>506distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>506cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>506resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>507codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>507distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>507cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>507resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>508codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>508distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>508cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>508resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>509codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>509distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>509cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>509resposta</con:name><con:value>34</con:value></con:property><con:property><con:name>510codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>510distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>510cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>510resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>511codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>511distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>511cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>511resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>701codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>701distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>701cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>701resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>706codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>706distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>706cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>706resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>707codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>707distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>707cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>707resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>708codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>708distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>708cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>708resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>709codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>709distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>709cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>709resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>710codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>710distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>710cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>710resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>711codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>711distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>711cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>711resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>712codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>712distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>712cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>712resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>713codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>713distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>713cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>713resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>714codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>714distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>714cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>714resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>716codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>716distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>716cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>716resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>717codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>717distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>717cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>717resposta</con:name><con:value>14</con:value></con:property><con:property><con:name>718codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>718distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>718cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>718resposta</con:name><con:value>59</con:value></con:property></con:properties></con:testSuite><con:testSuite id="b588906c-3f80-42f3-98c3-79b5bde758b8" name="TesteCompleto"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="9cff2d21-d8d2-4ee4-9a3f-154ce8309721" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Cria Banco de Testes" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Testa Conexao" id="8b6378f2-a4ff-41cb-b6c0-90bb39377cb3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" convertColumnNamesToUpperCase="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://201.65.240.131:3306/mysql?user=root&amp;password=root</con:connectionString><con:query>SELECT count(*) FROM db</con:query><con:assertion type="JDBC Status" id="8ae59bb3-1e6c-49d8-9d92-4730c2b01cfa" name="JDBC Status"/><con:assertion type="JDBC Timeout" id="88d8d9b7-0641-4bce-b2f8-402fde11a825" name="JDBC Timeout"/><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Recriar Banco" id="477a207a-6b7a-4c04-a46d-21ec392d8c6a"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/information_schema?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("SELECT count(*)bancoexiste FROM SCHEMATA where SCHEMA_NAME = 'enterative'");

def bancoexiste = res[0];
log.info(bancoexiste);

if (bancoexiste != null){
	def query = "DROP DATABASE enterative";
	con.execute(query);
}
def query = "CREATE DATABASE enterative";
con.execute(query);

con.close();</script></con:config></con:testStep><con:testStep type="manualTestStep" name="Ativar Manualmente o Servidor" id="e60bf08c-cebb-40e4-82cb-73ef69848c6a"><con:description>Inciar o Servidor e aguardar mensagem do echo</con:description><con:settings/><con:config xsi:type="con:ManualTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="groovy" name="PopularTabelas" id="8dc962f1-adc1-43cc-87e5-2c2f1ce29f2b"><con:settings/><con:config><script>import groovy.sql.Sql;

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");
def query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401908' , 'GCMV IMVU 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401916' , 'GCMV HELP PROVAS 19 90BRL', 19.90)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401188' , 'GCMV FACEBOOK 25BRL', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164401189' , 'GCMV FACEBOOK 45BRL', 45.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403309' , 'GCMV GOOGLE PLAY BRASIL 15BRL', 15.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403310' , 'GCMV GOOGLE PLAY BRASIL 30BRL', 30.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403311' , 'GCMV GOOGLE PLAY BRASIL 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164403312' , 'GCMV GOOGLE PLAY BRASIL 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164404845' , 'GCMV HABBO ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405063' , 'GCMV RIOT BRASIL ASSISTED 20BRL', 20.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405061' , 'GCMV RIOT BRASIL ASSISTED 50BRL', 50.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164405062' , 'GCMV RIOT BRASIL ASSISTED 100BRL', 100.00)";	
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400391' , 'ROTEIRO HOMOLOGACAO 7', 25.00)";
con.execute(query);
query = "INSERT INTO produto (ean, descricao, valor_de_face) VALUES ('505164400392' , 'ROTEIRO HOMOLOGACAO 5', 25.00)";
con.execute(query);
 
query = "INSERT INTO distribuidor (iddistribuidor, nome, cnpj, cpf, endereco, bairro, cidade, estado, cep, telefone, contato, email, situacao, data_incl, data_alte, observacao, acquiring_institution_identifier, merchant_identifier, merchant_location, merchant_category_code, point_of_service_entry_mode) VALUES (142749, 'Chart', '42767525000105', '', 'Rua dos Guajajaras,977', 'Lourdes', 'Belo Hol', 11, '31360060', '', '', 'andremelo@chart.com.br', 0, '2017-02-02 17:31:40', '2017-02-02 17:31:40', '', '60300004684', '60300004684    ', '                      Campo Grande MS BR', '5399', '041')";
con.execute(query);

query = "INSERT INTO usuarioweb (idusuarioweb, login, password, nome, situacao, distribuidor_iddistribuidor) VALUES (3, 'chart', "+'"$2a$10$xkdQa3ulII0gM22Mz4mXOOqdyInLRajplnugCN5jmcdNsEjF4PARK"'+", 'chart', 0, 142749)";
con.execute(query);
query = "INSERT INTO usuarioweb_roles (usuario_web_idusuarioweb, roles_nome) VALUES(3, 'ROLE_USUARIO')";
con.execute(query);
query = "INSERT INTO servidor (situacao,descricao) VALUES(1,'HOMOLOGACAO')";
con.execute(query);

query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),0,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),4,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/reverse')";
con.execute(query);
query = "INSERT INTO recurso(servidor_idservidor,tipo,endereco) VALUES((SELECT idservidor from servidor where descricao = 'HOMOLOGACAO'),6,'https://blast.preprod.blackhawk-net.com:8443/transactionManagement/v2/transaction/network')";
con.execute(query);

//query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TEMPO_ENVIO_CANCELAMENTO',900000)";
query = "INSERT INTO paramcfg (grcodigo,ticodigo,dado)VALUES('','TEMPO_ENVIO_CANCELAMENTO',15000)";
con.execute(query);

con.close();</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3100f781-54dd-4336-9dc8-4b1599ea65e6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="301" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="4c8cd09a-de7d-45c3-8f9a-c8c99b02f08f"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="bf06fbf2-7230-4f95-8004-daec846756c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="32fefe59-24fb-404b-aa8f-d30dc4746cb4"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="49156baf-4ea4-417e-bf2e-2824065b5500"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="0c900211-135b-407b-bf38-d8f816cea5bb"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "301"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c8bb8862-a988-47fc-a5a5-7beb1f3dec19"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="8ea7dcd8-a6ed-4443-bb70-335291f930a9"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="0ccdf21f-6c15-4da8-899c-b26196a1b5f1"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="d78bebb5-26d6-4e75-8513-3240b1d6e381"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "301"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="44959fe0-2522-4f97-bc3a-695918f63760" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="302" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="4ac2727d-0d9e-4ae9-b2b4-e7be1b8633e4"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="60d97258-7d5b-4235-993b-3f0a32cb186e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ea5f1f84-74c2-4b05-a5a7-691eccfa6699"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="ec8299b9-fa3a-4000-9906-17f9993bfd4f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="1d9e911f-2f78-42d2-9264-5057b2df7710"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "302",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c80890d5-abe5-4ff3-9d4a-cac0b49a0288"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b44405a1-bc08-4d9f-9c23-e8f80dae52a8"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="4ccf034d-3367-432c-9d83-2ec6f3584573"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="349c7fe6-bd95-4180-ad3a-272978f6db20"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "302",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="810c4356-f51d-4859-871c-16eac76fbc56" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="303" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="66f63577-1fa9-41d2-9ecc-169301e211ba"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="54fc41e5-6630-45c0-8552-fd22ce52ea9f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="5cb6b829-6463-441c-bfde-775db02d1115"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>21</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="45148808-e935-4377-8198-9dd4b8b1edfb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="788000f4-d424-40a0-a180-d9dc05bf6bc2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000021",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "303",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="086ae015-aa1d-4157-8c09-3bb2b9d4137a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f1b5790c-213b-468e-b6a1-63498e2be504"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="cb2056b6-3cb7-4a35-aeb8-7225bd682f00"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a603b576-15bd-4338-9776-6af9eb4d29d3"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000021",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "303",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>resposta</con:name><con:value>21</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="f6d72522-089f-43d2-8a65-07614a1f3dc8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="304" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="2faa559d-f49d-4fb1-b271-73b132f64c22"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="0f843e74-2097-4697-b12e-146911dff34c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="046b77e4-447f-4d73-8ff3-83920ce0e0ed"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="fbd5a376-fbc3-4797-b195-ee987f097659"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d05651ff-0bf8-4d47-bfb4-5c07caa09421"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "304"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e736ddca-c7ca-40e4-b69a-df740f99699a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d3c45fc4-a40e-41c1-8403-ff019934f4a5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ad0c7e66-6bef-4952-8382-916f038b3a25"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="449b1263-b07a-4a54-92f6-dc494c0e72a8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "304"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="7932a037-1149-4896-a549-370992c2a98c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="305" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="72e726fe-ad11-4f4b-a1f3-5dfe3f68c891"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="10405b77-e83c-4147-91b3-f3ae12fa0cb0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="60e2b72e-548b-4896-ae2d-c5c34a59ddbc"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>16</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="9f9fc22d-82a4-40ac-b8b5-a842d6567b43"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="19a41143-bbf7-4d79-a09b-a04fe40c15f1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000016",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "305"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="0fe751d1-3947-4bc1-aa52-7c2247ebf610"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="568b029b-f283-4f55-b8e5-72f00056e834"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="901f7e2f-65fc-41cf-a99f-59377354fcd8"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="af8360df-b45f-4181-a63c-9fb58b21ba77"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000016",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "305"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>resposta</con:name><con:value>16</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="1824e063-9e8b-4dea-9935-a76bd39a6269" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="306" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="b734173b-9d8e-4bf5-99c3-71dc5b903a62"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="8d953bdc-2d54-4c4e-8a3b-84b9e00573c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="0d830ce2-2a2b-45fb-9a83-b3e46fbc0a32"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>33</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="df2ae7cb-45f3-42ad-986a-eff9443cd9a4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="167e3f44-ed08-4f8c-a7e2-297a249b2788"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000033",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "306",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="be7df10e-80de-4396-83b1-25efbb42fab6"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f8d5d52d-cf9c-40b0-b0fd-1cec7cd62d57"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="fc665b11-f8dd-473e-a4f1-c00dfd1ae771"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f4ec8ba4-7933-4766-9069-5947f56a432a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000033",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "306",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>resposta</con:name><con:value>33</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="64714d38-6ef4-4935-b09e-47588b177681" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="307" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="61a44164-ddac-400e-a950-38010273448c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="6ee2a2f5-d952-442f-a6ee-88342181723c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="017914b2-2184-462e-ad35-a24b65737300"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="242da024-0de0-4993-8297-f9ee5042b1f5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="12670e51-49d6-4ce3-a12b-b4bb789976a1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "307",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="1a79167d-e9fd-4829-bdfa-75fe4f95eefd"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="730bb9a9-3a25-49bb-be6f-5a085dc5d84c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e970214c-4334-4c6b-8547-6a5f2cadd604"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2bb901e4-65cd-4cac-8a8c-75c1519c5741"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "307",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="a8a0b85e-225e-4635-9562-d48c56b7c4c0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="308" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="f08697b7-2f1d-4895-a108-70d41db0e989"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3ad3cb2f-ce85-40c5-b856-c7540102ca64"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="94f27b1b-9834-4fde-a801-fffb9d5bbdd2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>17</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="57948e08-f2b5-4e94-8593-882e04fc3ca9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="88d18d20-5e87-46d3-8d0f-e80d9665495d"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000017",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "308",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="54f59f65-c20b-41dc-b8b9-b4005757b622"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f72dd031-c01e-4f9b-8658-10d1db96721f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="f260f115-6f9f-4210-8224-084e70e6cfc7"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="657c1e6d-b294-4918-9ca4-5a4350517e6b"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000017",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "308",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>resposta</con:name><con:value>17</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="96ca6235-122b-42c6-ba1b-d211b1d7775b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="309" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="66a1ff58-da43-4dc2-903e-729f56b043d0"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="4917af54-f1d2-4ff0-97ed-78621f1db367"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="1ca4b732-124c-4c2c-9e0d-f02f1ff12c57"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>41</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="9df30317-0817-4a3b-aa8d-17372b496dba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="24238c67-4a22-4c84-a521-7af9bf16fa8f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000041",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "309",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="29f4e96f-3254-49ba-ad88-e67fcaee45f4"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d1fb792d-3b49-456b-a7ed-74ddaefc3659"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e0350367-32ef-4f5b-8a0b-f9e2201c19cb"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="b077f98b-e01a-450e-a8ab-bfd37703913a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000041",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "309",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>resposta</con:name><con:value>41</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="58f1de5e-04d9-41b5-b27e-5e7e6398655b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="310" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="b0c89574-26fa-4e17-a748-001c5af54ff2"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="49b2f9c4-76e5-480b-a947-9b13ee7dceca"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="fcf015a9-6205-4724-b834-e9f7f0ce4b95"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>69</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="e44730fc-fcda-4700-88b3-cb5e825a7d10"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="cda6ac36-26e4-4c5a-bbaa-69a01a32d303"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000069",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "310",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f786fce9-3a6a-4f2f-9f00-0894f4c7e800"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="41798211-c6cf-440b-a710-4d045bb30573"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="21765f1f-14f2-4b2e-ab6d-33110a70319c"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="f30779fb-9032-4494-a1e3-50ea0471362d"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000069",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "310",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>resposta</con:name><con:value>69</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="c1101f7e-5526-46c6-b2af-079833cdea8e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="311" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="e9a109cf-7349-4c66-af83-85c8225481b7"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="35c8503a-7411-4480-a86f-08f479432002"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2c5f95cc-ce8a-4a38-ab9a-bbd55bf7b612"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f2068386-7262-43a6-bfa6-eb3152333da2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="fe815712-21de-4eaf-b95b-d44cdeba16cf"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "311",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="2753a36a-b2bd-47d4-a052-90e6202d2fc7"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f890d2f0-e6cc-4b91-b2d2-7a5443e53ac6"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="fbd75fd6-638b-4a13-bbde-bc265e12d943"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2d19649c-341d-4be7-a3e4-f08016b90cbb"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "311",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="dfa92c8f-5f6b-452f-b8ff-7493c92f06d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="312" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="a024d8d7-2f09-41fb-85fe-ca8388cd46dd"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7a22a8fe-70f4-497c-84d0-09e880c63b0b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ae339d3c-f2f6-43cd-a370-f80f830d1505"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="753d8286-b763-47cd-bdff-b57e93b8ac6e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="54212551-9dbd-42c7-be4b-57c02e8569a5"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "312",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ee3ea1af-6990-4a60-8c09-49a215ceab29"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="00151bdf-6e58-48e8-bb8d-4556e652d1e4"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="5c068c20-b101-46e3-9f21-2f196e47530d"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="dda47a00-61a9-4a13-bafa-06381e921fec"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "312",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="49446add-9270-4403-a315-44a85dfb4ef2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="313" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="e0f914a6-73e4-4b2d-93fe-571d73f8bf0d"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="25ff3d4f-dbf1-48f5-ac28-395044dc4603"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="99cf87f1-5601-40fe-8f9e-7c4b2a3ac376"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="74280336-c76f-4927-8f66-8b352fe1186c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="107e7cb8-6b69-4506-8ca3-4e7d39ed3df2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "313"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="8c3b6284-c54e-40ca-9a9b-4e905be336e4"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="7a83e4ba-c276-48b7-aded-270bced8c269"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="0aa252f5-bec9-470f-9f94-7e0d13d4e372"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="93e70ecf-eb15-4a27-b9c7-eac239e0b4b1"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "313"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="a02c268a-517a-423e-b640-1d42ccdb9a53" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="314" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="9b3ca9dd-0501-44ab-a3b1-b8afb5b79d50"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="faa43da2-3c8b-4575-943a-9c49cffe53e0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2c7ea4e8-2dab-4c36-a489-49f4af6fd923"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="2aafac9e-7cf2-4cd5-8410-349fb4cd905d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="85909c9c-ea7a-4a84-be13-64766725fbcc"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "314",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="bb49aa4d-ffaf-4b8c-9a34-083757c075d1"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="100518d7-6c40-4522-9554-2a41b28bc6cc"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="3cc821d7-d6ce-4acd-94f0-43332b7be75d"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="864d9b69-1f51-4dec-b32a-e0571c0ec89a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "314",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="62124205-54b3-425b-9deb-e40436a0694f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="315" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="3213cf2a-138d-4b2c-96d5-c78e27904762"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="942bf54d-32b0-4c20-b2e3-3517b84cfc42"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="03254263-25e2-4db4-b8c8-765737b2faa6"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="7ff6692b-edd6-4830-9811-3df3d12d6f1c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="a0b3fae3-543a-40f5-bb68-13bca8944557"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "315",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="91c2bb03-e49a-46eb-9552-58b45f7b9107"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="943abe2f-16b2-4125-834a-7d42eca4d225"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="7a28e179-646d-476e-98b6-0d3163af2117"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="d070d0ed-1439-464b-ba8e-f0bbdcb555fd"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "315",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="21100ce6-69bc-4e79-96a3-d04c872e1886" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="316" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6d21d02e-6567-4b52-9244-255b23595e56"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="a6d2c750-af86-4355-91ae-93317aeba689"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="4c16fcd7-60bc-4367-9fbf-8142988b1447"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="7fadc480-8ec1-4fc7-a7c0-9d9ee7ae1573"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="89468188-e3bc-406e-b4e3-54df93fdb1b2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "316",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4fcf6258-a3fd-4242-9697-34ad1df2ee43"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="f0d9b7fb-0b81-47b6-87dc-dc49ececb13e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="cf13bee1-89ba-4e33-a4e2-d7bc100d2b58"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="50d3a05b-820f-4d1b-9fbe-f1111ecf9536"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "316",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="d5962a3b-c5bb-4372-9587-8d0714d9fba3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="317" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c09fcd24-122e-43d7-a988-3a24e4ab72ea"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="f3246343-e7c8-4ee0-839f-c4c698af47c9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="b67e4ebd-8c43-445a-a2ad-49443a811f80"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="c250afd8-4ca3-4069-9449-3cd13054218e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="17a02b95-c667-46bf-b5aa-c0a351ebb0fa"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "317"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e28716a4-dc45-461e-9f2c-c310e44da148"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="7479c7a4-471d-4dd8-bb68-be6df8d17b96"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="08ea7dc3-34cc-4a44-83e3-4730ace3d40a"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e8bfc440-5f26-456a-9cae-bf9a74ae8fbb"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "317"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="9578ab59-3fe7-45d7-ae7c-2a593e30ed38" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="318" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="a4e9486f-78d3-48df-b163-cf3d430d88bf"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="90490b4f-8b04-4e7d-aa29-ba260cef1702"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="aaaf8a1c-a802-4474-88ce-4ae02f488e0a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="18419b12-b03d-48d4-a18e-617602633377"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="892762b4-a253-421b-9ab9-b8eae106b553"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "318"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a0820893-a5b8-449e-abef-8295cc87c2e3"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="ca941a93-5e30-4966-ade6-3e6cfe237cc0"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="fbe0aa3b-b9d0-44f4-9163-e46c204387ca"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="447839e6-21d6-43fb-b737-254d719288ce"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "318"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>0</con:value></con:property></con:properties></con:testCase><con:testCase id="b459bc3e-b7b7-4355-bb63-e65e11fc5881" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="501" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="93a8a996-4611-4af2-bbf8-f132ffbe385a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="3b987294-0823-4ce0-bf2d-31ffedf21986"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="a595e447-acc6-400f-8a15-5431ef2962f2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="377e6680-f1b1-42c2-81aa-5b9a7af72cac"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3f244953-cd67-484f-b85d-7597c4e41eca"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="c50da820-8708-4e39-87ef-64fd670ba9ca"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e500982a-fa94-4b7c-b88e-8fea047f06c5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ce1f8e7a-cc1d-475e-836c-987f063b70ea"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="ca195436-6221-4513-8632-bf63d1bd1c02"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="7cb1ad00-2abf-4dba-94ab-2e674917eb4c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="502" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="79ee022d-d459-4d0d-8475-91a37d6a1670"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="d924ff87-f993-4c4d-b354-81612d8c6dfc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="225cdf83-e051-4f9a-8da1-9b0ac029e761"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6e09f422-4105-4525-84d1-895fe1152cff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="2b2f21b2-b3a6-46f7-8ee8-18188412ec97"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "502"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b390435c-7c52-4b5c-82a7-2de777b9be3a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="cfc5dc44-1f73-4d81-96af-c5f51631fdc3"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="9b5dad51-0853-400a-8925-42e95e5c598c"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="ecea612e-a019-497a-8a1e-3aec4640bbe0"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "502"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="1d4ced3c-8455-4c0d-bf1d-2399f40bcf1c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="503" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="0a5a0870-666b-4c90-879e-7d4b9075ad95"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="17d0f98b-87a9-48d7-9500-1fedc2f5526d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="40558c1a-7707-4b12-8bc9-f0bd1ff6df1f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="c9cb5494-0bfa-4df7-b76e-e7a9ecca50c3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="f121338b-95ae-45ae-99e0-2113dfe9f360"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "503",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="da32eeb0-477f-4005-a188-825119f09431"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d3a1a69f-b527-49ab-9fe4-cb33e5f531ae"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="e69e95f2-3f21-47f0-90d2-25739d692f5e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="18b87418-0532-4c14-ba34-619fb8dbea94"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "503",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="191ad6e6-7475-456b-9d84-97de8beeee9b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="504" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="0b057bc3-adaf-44ab-b992-c396928292c6"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="eb218716-c2a7-43cd-af04-7b2a477df7f6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="d883a654-1317-4bc8-a047-6f7ad4af2f6f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="5cc24b9e-5c8e-4980-9da0-d46659ad17b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="bd3c446a-27d9-49c7-a3b6-42c3feeffef8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "504"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="1a09ae81-30c9-4f66-b911-98e0e4b60d1e"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="39a4cb68-1e4a-481a-965a-80e5947c67f5"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="522365c8-8a56-4a60-a85c-67458b2b37b7"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="7d0f71aa-7787-4a2d-832a-faa37869675c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "504"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="70814929-2388-4792-a5e1-917d61747b8f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="505" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="56c08c1e-d9c0-4227-846d-b1b2f3a3c1c5"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="6af7215a-22f6-4c17-a8ce-25825248a21c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="5fc0d608-45d3-42de-a31e-baca7487c3aa"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f3d75763-8bb9-47f9-a8eb-cf00146f4f6f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="9d28f915-cf57-4050-80bb-f7640a93cd48"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "505"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="cda21948-95aa-45a6-af2f-160e057a2c82"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e60514e4-0531-4185-97d8-b411f6f53c46"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="b3c5c83b-1821-4c87-bda4-af5cf41eb901"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="aec3388b-700f-4559-9196-6630f936b61a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "505"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="eec01409-5640-4b1f-b1a2-3d15cad71683" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="506" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="81ff01cf-9565-4623-ab0b-b2ddbb3824cd"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="257c0212-2145-446a-b730-58ad8871ab3d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="2fa10ed3-273a-4610-9ea7-268bd55c1471"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6b5b6b04-b1ad-4f85-ba06-56ce11b17f1c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="a790723e-e6f7-42d8-b4db-fb26dbe6cea8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "506"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f85e9ab9-2958-4c54-b6c7-d331f8c2499b"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="e59a56d9-0009-4c48-835f-ead05a7092d7"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="00215d14-492e-4615-a427-e5bd40f435b0"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="7e08d0d7-c087-4667-b817-e8804270b309"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "506"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="980d0594-ff46-4173-b5d9-d7471c102802" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="507" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="ace29c1a-0283-4100-b6ce-f3afd1462110"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="55962f26-731d-4a8e-9240-e30d0eb73ba7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="14aeb7a4-b397-4f2c-be83-6ed3e477e92c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="9895d0b7-fa5a-4487-a48b-8d4937e1ccd6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="e8cbf301-6bac-406e-a40d-2cfd69536e37"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "507"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="6bf42cbe-6956-48b6-bc1c-c1f46438a713"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="045975a2-653d-41df-94f5-13911b3cfb8a"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="2b52714d-d915-4ee0-b75e-145024063e36"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="25c88600-6fac-4497-b61e-ca37c74308c8"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "507"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="5e0ba73e-a33b-4f90-961a-dec3957612dc" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="508" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="a61d06be-58a8-4441-a268-e21dca079726"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="5266f527-fafe-4003-b21b-52ad4f4497da"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="583054b4-487a-4b47-b4b3-99db3e7cd7b3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6ddd7781-7f54-4c32-a7c1-476dd734409a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="b0fcf37c-614f-4276-82ca-a8ba2580492e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "508"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="fffb5cfd-f95d-4a85-896d-c4cdc0fccb68"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="77313b7f-cc0d-4ae1-9bd1-fd625e170016"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="55530ee5-8c87-4655-993e-62c685ae1715"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="9949abed-1001-4d30-9c3c-e0c6743a3267"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "508"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="76616cf8-0f84-42b0-a5cf-2b18512c8737" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="509" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c983ae65-bae2-4ae5-8ca7-3687b979a175"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="8d70f5f2-4cd5-46bf-8b82-4e5393a9631e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="8952594c-ecd1-4e6c-86ae-c332789fc386"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>34</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="8d84849f-c2ea-4e43-8318-cddef1bd1d84"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3872843e-6024-4cb8-a4e4-0582cc379206"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "509"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="5c1543e0-7820-47ff-aebd-3afda2aa555a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="c6c16c5b-bfc9-4728-8db6-49c039bf7255"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="8771cc21-ccc3-4480-ab8c-342bf47ee934"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="a37548c1-cbd9-4809-97e3-63f55b65b83f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000034",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "509"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>resposta</con:name><con:value>34</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="6541fe56-c641-449b-8122-8c83fbe6cc83" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="510" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="adb4fbb1-7f34-45f5-b248-1fc30392a34a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="621b8e29-4207-4101-9648-19d0653de03b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="447cdde6-d39d-4c76-a279-4d90218e1ded"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f11f0d4c-5b57-4c8c-8285-a73326046421"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="168541d6-5609-4e57-a310-3abd99a5ad61"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "510"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ccfee296-073e-4f59-8a51-3f436fc82a34"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="8c79c13d-127e-4d2e-8039-ad88ba1c9e01"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="6bcdd9f9-8200-403c-a9d1-ed3e567a4003"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="67500419-689a-453c-a713-b01e5a0600d2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "510"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="aaddc049-4639-4b00-bf3c-dc70894df48f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="511" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="5b5e1b03-76d7-415c-9e8a-8ff3476b0a61"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="c87e751a-a4d3-4972-832c-f52d8c527877"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="76e65a77-55c6-4b29-9c65-93fde29cdb3b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="72859827-b69a-40db-af0a-1f52d6a237c7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="d3ad208d-f9b7-4d10-8269-079bc97c6da2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000009999",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "511",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ad675fe5-56ab-44c9-b299-7a503a5b2c00"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="0ef74843-e912-4f65-90bb-06e86d5d3754"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="4fa3cde2-e946-4e24-9c5b-8649a12dfd1e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="abecba4a-8cff-4e54-ad68-dc68871ab16f"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "511",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="2d16d7de-045a-4f9c-8d82-cd5076fd5ea0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="03efbbf4-eee4-4cee-a3bc-d0a6cca422c4"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="35f95e68-5804-48b9-ae5b-3945367ac59f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="249dc84e-79ab-4423-a649-85a7deb2e1de"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="b76e52e5-e504-4ea1-81e4-c9a768c273bb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="3400d47e-50f9-4215-b3ad-c6752165fb86"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="3ef75806-0e07-4339-91b2-149e44b2ba9a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="b52423bf-97b4-44bd-9252-0918a12b56cb"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="c386fd6d-f11e-4c13-8b8f-d7ddf2d06c51"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="69e3e708-474b-4d2a-b403-94590e5ee5cc"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="5a59e92a-98eb-4735-8c8b-32c938529e72" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="706" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="ba70acae-4a89-46f3-9510-57a957e646dc"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="2327e527-5f0f-423c-b849-fb12d3e75b80"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="13f4bbe8-342a-4db1-90e6-be910da2b9b1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="a425b651-ae20-454a-9747-c838e77278c5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="99b78820-94ef-4345-a843-fc25714a05a2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="bc2ef1d5-f4b9-4385-ad0d-954d01b03020"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5ceb53b0-18fc-48e0-8f8f-bb0c0d83fa2c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="bf962c94-602d-4d7b-846d-05f6777f290e"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="48f41d22-e070-40a7-aab9-c6cd3eaf3552"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="82025df1-b3f9-4ee5-90f8-ed87d2788fa4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="707" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="fdf98205-35a1-44b8-91b9-d2036b5c8b7a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="383b6d67-c3f9-49c3-8384-08ae55595ea9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="fa479dc6-00f6-4c49-a1ae-b1ff46ae72f7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d0bd90e5-ced7-405c-8f2a-ed482850fdae"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="f1b4eec8-715b-4de9-ba39-48099cfa2801"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "707",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="cf5ff338-6015-4a92-a7d8-b986199b5b49"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="3910a4f1-0356-4e36-9cc7-6d7b47f71b43"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ab28009d-d4c8-4f3d-9adf-94b914ada7e3"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="12148b5e-a4a2-4d88-8646-9d80f6eb5523"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000012",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "707",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="135d3228-4a1b-4a57-bc06-76886ed36416" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="708" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="05c80deb-679d-4422-977b-67f2fe11bb7e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="eb70b32a-26a3-4837-b55e-c6aebf294016"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="631e50e1-adf4-4325-ac6e-7034dbab3f07"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="a006fe88-2808-4b85-82b9-8b258f9ab65b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="696a6f93-f677-4953-9ada-3a6e1bd47746"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f139290c-3558-42d7-8cb5-0842a7cb7498"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="44920967-1522-46a5-9b3d-62252c2b32f6"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="36b8725a-6ec2-4f62-a679-3aa97e496e76"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2b06f9a7-2a48-467c-9c4a-77af2b3f1f31"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="731447ce-7d4e-42a5-a581-ffed4fc999a0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="709" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="9ab7002a-91a0-44c4-a924-4623b8572b53"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="71cbe213-a85a-47b4-8739-c3c8d6fc0006"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="fb871b8b-508d-4b74-b8e8-9f8bb0103e7b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="8c8b4966-4d81-40e4-b22f-c89d1404d9c6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="275ac1f6-1974-4d21-9ae6-fc39395a82c2"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000058",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "709",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="ab813b1e-37d1-48d5-9632-6aa39fd0f81c"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="778f2139-c801-447b-8237-1313fd4c6c60"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="3e0fc582-6fec-4a35-8342-7722b21abfde"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="940dfd00-6e7d-45c4-8e6f-bba3615f3717"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000058",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "709",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="e8b7ec75-cb7e-4f15-b7f9-473e68ca2668" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="710" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="a74f4993-1503-4709-9876-cb293590aa48"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="e05e4fbc-c8ca-428a-a0da-ef84b998a60d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="3a45db4a-9ec9-4f51-b8c0-fd42bc87be25"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d9408a90-dff1-4af6-885a-509fdf9a382f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="4ec39304-15b0-491b-9dd6-9e1e7cc96e03"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000094",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "710",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="51b3fb19-8f17-453c-a1e1-32b5f21a977e"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5f522d76-e8f6-48c0-9ff0-4169dae8b4f7"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="70ce380d-b781-4ef8-8b56-ca3adba1a358"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="9a43fe07-29a1-4cb8-a59e-2cec742060f4"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000094",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "710",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="02d5f9d7-0a9b-4b3d-a999-4a9b7c8780ac" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="711" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="b553f786-f71e-4345-b8f9-0a0ba51c13ea"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="1ebf0ce0-c88f-4698-a5f7-4ebe6ba2e14e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="ed114ca3-8f07-4788-a68b-044aaa5f8183"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d8f2657b-f7b5-4a05-aa2e-5e5a56e464cf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="8c039e97-3252-4f8b-9597-8135efadf048"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "711",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="475d46b7-1c7c-4378-ae77-7144e7de85db"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="d3c46138-ff86-4706-9bac-5a1b883ab720"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="4d040cda-08ca-4ad4-b704-1c84b43de375"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2fee59c1-122f-4dd7-804d-2dfbf5e34077"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000099",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "711",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="81e68e08-b4f2-4d9a-b34d-51484fa81598" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="712" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="b629dc48-1d12-46f2-ba94-93fd79089a58"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="2224540d-1ee4-4556-b558-3f08cbcfe7eb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="f2a47ffe-28af-48ba-b02b-c3974483e1e5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="81620e21-c7c9-4759-af23-ed4ad4c84062"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="b0a17312-5562-44bb-bacd-7caefec28d82"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "712",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="53d249aa-15b1-4d9c-b62c-a94a0d8e89df"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5f4e6c53-37ac-4843-930e-afaea554fe2e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="85e6a482-f71f-424c-928f-999013564345"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="e34959e8-5840-41bc-9c30-6baa5df13b05"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000015",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "712",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="3e494c90-c9ff-417d-b15e-d61084cd94d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="713" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="c005f7f6-5692-4036-be0f-f9cbcea5d43e"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7c579fbc-87b5-47c9-9905-1356df1a1999"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="510077e2-5c50-4e09-9f92-a72e1c971e03"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="fdfc7bd6-520a-44a3-9b7f-005907397637"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="cbaa8ba7-043d-4029-a25a-6d795ab66596"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "713",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="8f54bd18-5911-46bf-97ee-9a8b1505f2be"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="efc94aea-90a7-42a3-b455-9ee72a8a396c"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="f100b986-77ff-4693-a942-6748f65b2aab"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="1034cede-07b6-4c32-95c9-19d70cabdc79"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000074",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "713",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="fc873203-687b-4f72-8de6-dfaefb22c114" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="714" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="d168abf3-984e-456a-af60-e2449b558fa8"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="9f5eb4a9-2751-4748-a68e-0656538369ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="31658164-4916-4eb8-be47-b6cd2180de7c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="6fa22039-7cdc-4fa8-bd09-4c028088e46a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="7dc2bed6-4a10-4907-8648-c65d63559059"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "714",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="96b32539-d8e5-4e2a-ad73-1d7a908dd12a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="5a6b5086-1a60-4401-ac09-a9850f87354d"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="a90a5ecb-2584-4bf3-8265-b3190757f210"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="c1cf081e-3184-45a3-8919-599eb14b7401"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000006666",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "714",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="66584be8-9b17-492f-9d2e-3c8c3223b639" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="716" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="71c94dde-e38c-4d15-88fd-a3a8a57f4b4a"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="5d94f68b-8d43-4302-a898-96b1fb30e34b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="f69909d3-902f-428a-a171-eddb016ea014"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f8e4b078-e05d-44e9-9ebd-075380dc6db1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="b359372d-1339-420f-ad3d-1b408cc2bd2c"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000009999",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "716",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="1ba9ab93-d22f-43c8-b68a-013e3cec90a4"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="79717e06-4c3a-407d-b1d1-506bd39bd5a6"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="f67cc5a8-2041-47cc-8035-6dd2c86bd9ed"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="54a4ad4e-270c-41f0-9301-25e1bca1231a"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000009999",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "716",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="14bfad4c-769d-4a9b-8aa6-a2cc403ee64b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="717" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="76e2e56e-db39-4c78-80b0-088a53123df9"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="2a3ff3bb-c072-4bd9-ba9b-50bdcdc71365"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="3b92a35d-3917-4183-a94c-a12c34ae9b70"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>14</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="76c44266-9be5-40cd-952b-ce55e105527c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5dc384c2-5a30-4707-b487-1d4ab7a03489"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000014",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "717",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="64a251df-69c9-44d1-8abe-4837b8689e0a"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="1dd3cf26-3e3a-49df-b61e-54dd898aac9f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="62f59d20-085d-4942-93bb-d16c9ca3e436"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="dfde6cdb-0ea3-478f-bbc5-89e7684130af"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000014",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "717",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>resposta</con:name><con:value>14</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="09c77f0c-c7a6-428f-aa58-1ea24f86b8ae" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="718" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="0cd909e5-8895-4b57-aede-50437f9baaad"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="b0141cfb-d766-4c0d-9c5c-49ba29f66bec"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="918a5cc7-82a5-4d13-ad32-baac25c338ad"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>59</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f6b1ac35-4985-476f-b80d-c96a13cfbf31"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="930ede29-a695-4e4f-bc58-776368660584"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000059",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "718",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="e2ba539f-e0f6-41fd-a089-314ccf776731"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="56d601c5-e30b-4bec-89e0-76185829f764"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="61aab51d-5ec2-4a6c-a957-cfb035df158a"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="eb460ffe-e98c-42f1-8be9-aa26349b0eca"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000059",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "718",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>resposta</con:name><con:value>59</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>301codexterno</con:name><con:value>301</con:value></con:property><con:property><con:name>301distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>301cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>301tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>301resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>302codexterno</con:name><con:value>302</con:value></con:property><con:property><con:name>302distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>302cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>302tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>302resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>303codexterno</con:name><con:value>303</con:value></con:property><con:property><con:name>303distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>303cardNo</con:name><con:value>50516440039100009877890000000021</con:value></con:property><con:property><con:name>303tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>303resposta</con:name><con:value>21</con:value></con:property><con:property><con:name>304codexterno</con:name><con:value>304</con:value></con:property><con:property><con:name>304distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>304cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>304tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>304resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>305codexterno</con:name><con:value>305</con:value></con:property><con:property><con:name>305distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>305cardNo</con:name><con:value>50516440039100009877890000000016</con:value></con:property><con:property><con:name>305tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>305resposta</con:name><con:value>16</con:value></con:property><con:property><con:name>306codexterno</con:name><con:value>306</con:value></con:property><con:property><con:name>306distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>306cardNo</con:name><con:value>50516440039100009877890000000033</con:value></con:property><con:property><con:name>306tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>306resposta</con:name><con:value>33</con:value></con:property><con:property><con:name>307codexterno</con:name><con:value>307</con:value></con:property><con:property><con:name>307distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>307cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>307tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>307resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>308codexterno</con:name><con:value>308</con:value></con:property><con:property><con:name>308distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>308cardNo</con:name><con:value>50516440039100009877890000000017</con:value></con:property><con:property><con:name>308tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>308resposta</con:name><con:value>17</con:value></con:property><con:property><con:name>309codexterno</con:name><con:value>309</con:value></con:property><con:property><con:name>309distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>309cardNo</con:name><con:value>50516440039100009877890000000041</con:value></con:property><con:property><con:name>309tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>309resposta</con:name><con:value>41</con:value></con:property><con:property><con:name>310codexterno</con:name><con:value>310</con:value></con:property><con:property><con:name>310distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>310cardNo</con:name><con:value>50516440039100009877890000000069</con:value></con:property><con:property><con:name>310tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>310resposta</con:name><con:value>69</con:value></con:property><con:property><con:name>311codexterno</con:name><con:value>311</con:value></con:property><con:property><con:name>311distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>311cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>311tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>311resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>312codexterno</con:name><con:value>312</con:value></con:property><con:property><con:name>312distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>312cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>312tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>312resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>313codexterno</con:name><con:value>313</con:value></con:property><con:property><con:name>313distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>313cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>313tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>313resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>314codexterno</con:name><con:value>314</con:value></con:property><con:property><con:name>314distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>314cardNo</con:name><con:value>50516440039100009877890000000000</con:value></con:property><con:property><con:name>314tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>314resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>315codexterno</con:name><con:value>315</con:value></con:property><con:property><con:name>315distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>315cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>315tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>315resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>316codexterno</con:name><con:value>316</con:value></con:property><con:property><con:name>316distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>316cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>316tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>316resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>317codexterno</con:name><con:value>317</con:value></con:property><con:property><con:name>317distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>317cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>317tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>317resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>318codexterno</con:name><con:value>318</con:value></con:property><con:property><con:name>318distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>318cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>318tipoAtivacao</con:name><con:value>0</con:value></con:property><con:property><con:name>318resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>501codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>501distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>501cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>501tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>501resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>502codexterno</con:name><con:value>502</con:value></con:property><con:property><con:name>502distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>502cardNo</con:name><con:value>50516440039200009877890000000012</con:value></con:property><con:property><con:name>502tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>502resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>503codexterno</con:name><con:value>503</con:value></con:property><con:property><con:name>503distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>503cardNo</con:name><con:value>50516440039200009877890000000013</con:value></con:property><con:property><con:name>503tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>503resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>504codexterno</con:name><con:value>504</con:value></con:property><con:property><con:name>504distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>504cardNo</con:name><con:value>50516440039200009877890000000058</con:value></con:property><con:property><con:name>504tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>504resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>505codexterno</con:name><con:value>505</con:value></con:property><con:property><con:name>505distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>505cardNo</con:name><con:value>50516440039200009877890000000099</con:value></con:property><con:property><con:name>505tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>505resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>506codexterno</con:name><con:value>506</con:value></con:property><con:property><con:name>506distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>506cardNo</con:name><con:value>50516440039200009877890000000094</con:value></con:property><con:property><con:name>506tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>506resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>507codexterno</con:name><con:value>507</con:value></con:property><con:property><con:name>507distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>507cardNo</con:name><con:value>50516440039200009877890000000015</con:value></con:property><con:property><con:name>507tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>507resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>508codexterno</con:name><con:value>508</con:value></con:property><con:property><con:name>508distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>508cardNo</con:name><con:value>50516440039200009877890000000074</con:value></con:property><con:property><con:name>508tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>508resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>509codexterno</con:name><con:value>509</con:value></con:property><con:property><con:name>509distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>509cardNo</con:name><con:value>50516440039200009877890000000034</con:value></con:property><con:property><con:name>509tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>509resposta</con:name><con:value>34</con:value></con:property><con:property><con:name>510codexterno</con:name><con:value>510</con:value></con:property><con:property><con:name>510distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>510cardNo</con:name><con:value>50516440039200009877890000006666</con:value></con:property><con:property><con:name>510tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>510resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>511codexterno</con:name><con:value>511</con:value></con:property><con:property><con:name>511distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>511cardNo</con:name><con:value>50516440039200009877890000009999</con:value></con:property><con:property><con:name>511tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>511resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>701codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>701distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>701cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>701tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>701resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>706codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>706distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>706cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>706tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>706resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>707codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>707distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>707cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>707tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>707resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>708codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>708distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>708cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>708tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>708resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>709codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>709distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>709cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>709tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>709resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>710codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>710distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>710cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>710tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>710resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>711codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>711distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>711cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>711tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>711resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>712codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>712distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>712cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>712tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>712resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>713codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>713distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>713cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>713tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>713resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>714codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>714distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>714cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>714tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>714resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>716codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>716distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>716cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>716tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>716resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>717codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>717distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>717cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>717tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>717resposta</con:name><con:value>14</con:value></con:property><con:property><con:name>718codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>718distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>718cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>718tipoAtivacao</con:name><con:value>1</con:value></con:property><con:property><con:name>718resposta</con:name><con:value>59</con:value></con:property></con:properties></con:testSuite><con:testSuite id="7d8f61db-bb19-4dd0-995c-22fe6c7df70d" name="Homologacao BHN"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ce3b94ac-77ba-4908-b631-24a323c5d856" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="701" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="eab9b306-ba22-431f-ac67-1f315fbf8772" disabled="true"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="89eb2601-2b4e-4397-a36b-9ddb7dffd213" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="7e78d6b8-d91f-450e-97f4-e291df796da5" disabled="true"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="f31fe7f4-11cb-411e-aec8-903c515a41e1" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="6cf84394-7186-4a16-aa92-697665d0a647"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440226406369331947275756027",
   "tipoAtivacao": "0",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "9018",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="35330279-829f-4477-9ad2-ae3f27a72d0b"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="a1ab3cb0-9489-40a0-badd-7105a28f7afb"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="db354a2a-2bc2-4d0b-8bc0-9b314bde7c92"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="2a27fd48-3c4f-4fba-b28b-0fd51116e09e"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440118806039534201000000024",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "701",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="3d06f430-bed3-45b4-b1c7-e71f6b3a0a2c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="706" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="2189776d-2eba-4e90-accc-7a9d6d1cc0ac"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="b4ea6eaa-4d66-4e74-9827-fd388cee2367"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="d67eff1c-726a-4c36-8b0a-2efbdbb5f8f7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="9e8cde4b-fb48-4b8b-a426-c1e3d6c24cd2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="50a3e4b2-f964-4604-b4e5-81859bb1d154"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="d47af3fe-21ac-4c5f-bbe8-50e6aecad904"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="10d1a442-9024-4608-a180-0f4e5b03ec2f"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="709ab0e5-fe85-4f09-80a8-10dc984e62ed"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="c472528d-36fd-4b1a-933b-e19710c4fa09"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000008",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "706",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="2c4c88ea-9894-4c4e-9344-bbb7c579c48f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="707" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="7a95a69e-ab75-4546-84e0-a4ca85eea294"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="37d29323-1ae5-48fe-a041-8a6087f9e767"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="dc6ad129-b4c3-4a89-ae73-6d5650f6b2c7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d7e6db3e-38ed-4856-bcea-303e1066a1cf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="596393fc-3bf5-4d16-809e-068f72ddfa39"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="19240307-0840-40e2-97c4-e81b611e63dc"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="9d00358f-dda9-4837-933f-5a2096f2ec1b"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="ef0f1211-6765-4ced-a810-7e798b233980"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="5d46438a-bc9e-47a9-8b68-d53badb3c931"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:testCase id="560e86da-0bf4-4bfe-9b27-bce1052ac0da" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="708" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="5a7b2173-5ed2-4305-acea-21ef718b854c"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="b6d36635-cf7b-4ccd-b4f0-c47c9a5562ed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="1b649c3a-4b96-4d41-b485-072ee1b60f72"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="d0c57db4-2abe-4668-875d-5a168d3b4f63"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="77cce538-22cb-4b21-854b-8da3452db8aa"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "tipoAtivacao": "1",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="abd9f8d9-3db4-4574-baea-3a2df5a8cec0"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="586bc995-3d54-4fae-9b7f-0acf693c9853"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="30886337-455f-4107-9a0a-02f48748b69c"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="15e9eb85-17f0-47de-9b2c-bc215d1cf227"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039100009877890000000013",
   "distribuidor": "142749",
   "terminal": "321",
   "codexterno": "708",
   "pdv": "123"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties></con:testCase><con:testCase id="2431c38b-5306-47dd-815a-241e947e9303" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="709" searchProperties="true"><con:settings/><con:testStep type="groovy" name="AtualizaParametro" id="6916bb78-c626-4951-86ee-e351435bd998"><con:settings/><con:config><script>def testcase = testRunner.testCase.getLabel()
log.info testcase

def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
def distribuidor = testRunner.testCase.testSuite.getPropertyValue( testcase + "distribuidor" )
def cardNo = testRunner.testCase.testSuite.getPropertyValue( testcase + "cardNo" )
def resposta = testRunner.testCase.testSuite.getPropertyValue( testcase + "resposta" )
def tipoAtivacao = testRunner.testCase.testSuite.getPropertyValue( testcase + "tipoAtivacao" )

log.info codexterno
log.info distribuidor
log.info cardNo
log.info resposta
log.info tipoAtivacao

testRunner.testCase.setPropertyValue( "codexterno", codexterno )
testRunner.testCase.setPropertyValue( "distribuidor" , distribuidor )
testRunner.testCase.setPropertyValue( "cardNo" , cardNo )
testRunner.testCase.setPropertyValue( "resposta" , resposta )
testRunner.testCase.setPropertyValue( "tipoAtivacao" , tipoAtivacao )
</script></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosCasoTeste" id="7a484202-cfef-4a5a-90d1-61d1ced2fcd9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>codexterno</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>cardNo</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>resposta</con:name><con:sourceType>resposta</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>respostaEsperada</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>distribuidor</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>#TestCase#</con:sourceStep><con:targetType>tipoAtivacao</con:targetType><con:targetStep>ParametrosLocais</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="properties" name="ParametrosLocais" id="45289daa-99aa-4539-a6da-3ff0e3305590"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>respostaEsperada</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="transfer" name="TransfereParametrosLocais" id="ed2660ad-5896-4d01-837d-2e56e2edf510"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>codexterno</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>distribuidor</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.distribuidor</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>cardNo</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>codexternoValidacao</con:name><con:sourceType>codexterno</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.codexterno</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>upcValidacao</con:name><con:sourceType>distribuidor</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.upc</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>cardNoValidacao</con:name><con:sourceType>cardNo</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:sourcePath xsi:nil="true"/><con:targetType>Request</con:targetType><con:targetStep>ValidaResposta</con:targetStep><con:targetPath>.cardNo</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false" disabled="false"><con:name>tipoAtivacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>tipoAtivacaoValidacao</con:name><con:sourceType>tipoAtivacao</con:sourceType><con:sourceStep>ParametrosLocais</con:sourceStep><con:targetType>Request</con:targetType><con:targetStep>EnviaJson</con:targetStep><con:targetPath>.tipoAtivacao</con:targetPath><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="EnviaJson" id="5083d4db-d4c6-468a-a71e-cc126e7f8f70"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="EnviaJson" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501",
   "tipoAtivacao": "1"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b7f2866d-bb3d-452f-8558-bdd083e67266"><con:settings/><con:config><delay>500</delay></con:config></con:testStep><con:testStep type="groovy" name="PossuiResposta" id="bf4b6d76-f521-4891-bab5-e30464bb274e"><con:settings/><con:config><script>import static com.jayway.jsonpath.JsonPath.parse

def response = context.expand( '${EnviaJson#Response}' )

def resposta = parse(response).read('$.resposta')
log.info resposta

if (resposta==null) testRunner.gotoStepByName("EnviaJson")</script></con:config></con:testStep><con:testStep type="groovy" name="Fim do Processamento" id="41b4929b-0ec4-40ad-94f2-70ea99531696"><con:settings/><con:config><script>import groovy.sql.Sql;

def testcase = testRunner.testCase.getLabel()
log.info testcase
def codexterno = testRunner.testCase.testSuite.getPropertyValue( testcase + "codexterno" )
log.info codexterno

def con = Sql.newInstance("jdbc:mysql://201.65.240.131:3306/enterative?user=root&amp;password=root", "root", "root", "com.mysql.jdbc.Driver");

def res = con.rows("select codexterno from ativacao where codexterno = '"+codexterno+"' and NOT ( status in(2,3) AND situacao IS NULL )");

def processado = res[0];
log.info(processado);

if (processado != null){
	testRunner.gotoStepByName("EnviaJson");
}</script></con:config></con:testStep><con:testStep type="restrequest" name="ValidaResposta" id="38e0a246-7c92-449e-936b-a610662c2292"><con:settings/><con:config service="http://localhost:8000" resourcePath="/ws/ativacao" methodName="Ativacao 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ValidaResposta" id="97c50977-cb52-474d-8164-a7337b6cc3e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://201.65.240.131:8123</con:endpoint><con:request>{
   "cardNo": "50516440039200009877890000000000",
   "distribuidor": "142749",
   "terminal": "321",
   "pdv": "123",
   "codexterno": "501"
}</con:request><con:originalUri>http://localhost/login</con:originalUri><con:assertion type="JsonPath Match" id="f563e29c-cb90-4ca6-94ac-83a05d76fa0d" name="JsonPath Match"><con:configuration><path>resposta</path><content>${ParametrosLocais#respostaEsperada}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username>chart</con:username><con:password>inovation</con:password><con:domain/><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:preemptive>true</con:preemptive><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>codexterno</con:name><con:value>501</con:value></con:property><con:property><con:name>cardNo</con:name><con:value>50516440039200009877890000000000</con:value></con:property><con:property><con:name>resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>tipoAtivacao</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>701codexterno</con:name><con:value>701</con:value></con:property><con:property><con:name>701cardNo</con:name><con:value>50516440118806039534201000000024</con:value></con:property><con:property><con:name>701distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>701resposta</con:name><con:value>00</con:value></con:property><con:property><con:name>706codexterno</con:name><con:value>706</con:value></con:property><con:property><con:name>706distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>706cardNo</con:name><con:value>50516440039100009877890000000008</con:value></con:property><con:property><con:name>706resposta</con:name><con:value>08</con:value></con:property><con:property><con:name>707codexterno</con:name><con:value>707</con:value></con:property><con:property><con:name>707distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>707cardNo</con:name><con:value>50516440039100009877890000000012</con:value></con:property><con:property><con:name>707resposta</con:name><con:value>12</con:value></con:property><con:property><con:name>708codexterno</con:name><con:value>708</con:value></con:property><con:property><con:name>708distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>708cardNo</con:name><con:value>50516440039100009877890000000013</con:value></con:property><con:property><con:name>708resposta</con:name><con:value>13</con:value></con:property><con:property><con:name>709codexterno</con:name><con:value>709</con:value></con:property><con:property><con:name>709distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>709cardNo</con:name><con:value>50516440039100009877890000000058</con:value></con:property><con:property><con:name>709resposta</con:name><con:value>58</con:value></con:property><con:property><con:name>710codexterno</con:name><con:value>710</con:value></con:property><con:property><con:name>710distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>710cardNo</con:name><con:value>50516440039100009877890000000094</con:value></con:property><con:property><con:name>710resposta</con:name><con:value>94</con:value></con:property><con:property><con:name>711codexterno</con:name><con:value>711</con:value></con:property><con:property><con:name>711distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>711cardNo</con:name><con:value>50516440039100009877890000000099</con:value></con:property><con:property><con:name>711resposta</con:name><con:value>99</con:value></con:property><con:property><con:name>712codexterno</con:name><con:value>712</con:value></con:property><con:property><con:name>712distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>712cardNo</con:name><con:value>50516440039100009877890000000015</con:value></con:property><con:property><con:name>712resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>713codexterno</con:name><con:value>713</con:value></con:property><con:property><con:name>713distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>713cardNo</con:name><con:value>50516440039100009877890000000074</con:value></con:property><con:property><con:name>713resposta</con:name><con:value>74</con:value></con:property><con:property><con:name>714codexterno</con:name><con:value>714</con:value></con:property><con:property><con:name>714distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>714cardNo</con:name><con:value>50516440039100009877890000006666</con:value></con:property><con:property><con:name>714resposta</con:name><con:value>C99</con:value></con:property><con:property><con:name>716codexterno</con:name><con:value>716</con:value></con:property><con:property><con:name>716distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>716cardNo</con:name><con:value>50516440039100009877890000009999</con:value></con:property><con:property><con:name>716resposta</con:name><con:value>15</con:value></con:property><con:property><con:name>717codexterno</con:name><con:value>717</con:value></con:property><con:property><con:name>717distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>717cardNo</con:name><con:value>50516440039100009877890000000014</con:value></con:property><con:property><con:name>717resposta</con:name><con:value>14</con:value></con:property><con:property><con:name>718codexterno</con:name><con:value>718</con:value></con:property><con:property><con:name>718distribuidor</con:name><con:value>142749</con:value></con:property><con:property><con:name>718cardNo</con:name><con:value>50516440039100009877890000000059</con:value></con:property><con:property><con:name>718resposta</con:name><con:value>59</con:value></con:property></con:properties></con:testSuite><con:endpointStrategy xsi:type="con:DefaultEndpointStrategy" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:endpoint mode="COMPLEMENT" username="chart" password="inovation" domain="">https://201.65.240.131:8123</con:endpoint></con:endpointStrategy><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>